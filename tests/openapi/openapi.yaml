openapi: 3.0.3
info:
  title: PileCore
  version: 2.0.0
  description: >-
    PileCore aims to give you the full pile calculation utilities without an
    engineer in the loop. This means that calculations must be able to run from
    start to finish from a set of given parameters. Pilecore is able to
    determine the tipping point between positive and negative friction and will
    optimize pile groups automatically.

    ## Access

    A bearer-token is required for this web-API. Sign in or sign up (for free!)
    on our [nuclei website](https://nuclei.cemsbv.io) and use the "Short-lived
    Access Token" from the "API Acess Tokens" section.

    ## Python

    For easy usage in a python script, see our open-source SDK
    [py-pilecore](https://github.com/cemsbv/py-pilecore) or the lightweight
    library [cems-nuclei](https://github.com/cemsbv/nuclei) (*Application-name =
    PileCore*).

    ## Addition URLs

    - [CHANGELOG](./../static?filename=CHANGELOG.md): All notable changes to
    this project will be documented in this file

    - [RELEASE](./../static?filename=RELEASE.md): All major changes to this
    project will be documented in this file.

    - [VALIDATION](./../static?filename=NTI1014vd3_TPileCore_validatie.pdf): Background
    information and validation of the API will be provided in this file.

    ## Known issues

    - The f2 factor for uplift piles does take some time to be calculated.
    - Due to precession errors the calculations of the A;eff of uplift calculation may be incorrect 
    for some cases where large number are used.

  contact:
    name: CRUX Engineering Microservices BV (CEMS)
    email: info@cemsbv.nl
    url: https://cemsbv.nl/products/pilecore
servers:
  - url: /
    description: Root url
paths:
  /healthcheck:
    get:
      description: Use this endpoint to check the state of the server.
      operationId: nuclei_cfg.responses.healthcheck
      responses:
        "200":
          content:
            text/plain:
              schema:
                description: Should be "server alive"
                type: string
          description: OK
      summary: Health Check
      tags:
        - Service
  /healthcheck-worker:
    get:
      description: Use this endpoint to check the state of the service.
      operationId: nuclei_cfg.job.healthcheck_worker
      responses:
        "200":
          content:
            text/plain:
              schema:
                description: Should be "Service alive"
                type: string
          description: OK
      summary: Health Check Worker
      tags:
        - Service
  /grouper/generate-grouper-report:
    post:
      operationId: api.web.grouper.generate_grouper_report
      summary: Generate a report based on the grouper result.
      tags:
        - Report
        - Grouper
      description: >
        This endpoint will generate a report based on a template. The template
        contains:
          - Filter specifications
          - Safety factors
          - Results of the calculation per pile tip level
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/shared_input_groups_meta_data"
                - $ref: "#/components/schemas/output_grouper"
                - $ref: "#/components/schemas/report_metadata"
              required:
                - sub_groups
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
  /get-task-result:
    get:
      operationId: nuclei_cfg.job.get_task_result
      summary: Get result of a task call
      description: Get request to get result of a task call
      tags:
        - Result
      parameters:
        - description: Task ID
          in: query
          name: id
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: OK
          content:
            application/pdf:
              schema:
                anyOf:
                  - type: string
                    format: binary
            application/json:
              schema:
                anyOf:
                  - $ref: "#/components/schemas/output_task_report"
                  - $ref: "#/components/schemas/output_task_status"
                  - $ref: "#/components/schemas/output_multi_cpt"
                  - $ref: "#/components/schemas/output_task_state"
                  - $ref: "#/components/schemas/output_grouper"
                  - $ref: "#/components/schemas/output_friction_ranges_lower_bound"
                  - $ref: "#/components/schemas/uplift_multiple_cpt_output"
            application/png:
              schema:
                anyOf:
                  - type: string
                    format: binary
        "403":
          description: Forbidden, you can only access your own created tasks
  /get-task-status:
    get:
      description: Get the results of the celery task created by the user.
      operationId: nuclei_cfg.job.get_task_status
      parameters:
        - description: Task ID
          in: query
          name: id
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          content:
            application/json:
              schema:
                properties:
                  msg:
                    example: >-
                      Task with id ef37b13e-3205-45b6-aa7c-84523b5a3d76 is still
                      running/pending.
                    type: string
                  state:
                    enum:
                      - PENDING
                      - SUCCESS
                      - FAILURE
                      - STARTED
                      - RETRY
                    example: PENDING
                    type: string
                type: object
          description: OK
      summary: Get Task Status
      tags:
        - Result
  /bearing/multiple-cpts/results:
    post:
      operationId: api.web.compression.calculation_compression_multiple_cpts
      summary: >-
        Run a bearing calculation with multiple CPTs and get the id of the
        task back.
      tags:
        - Bearing
      description: >
        Run a bearing calculation and obtain 2 DataFrames (with the
        get-task-result endpoint):
          - summary_table: Table containing the characteristic and design values per pile tip level.
          - all_results: Table containing all the claculated values per cpt and per pile tip level.

        ## Free account usage

        This endpoint can be called with CEMS-Nuclei free-tier users with the
        following restrictions:

          - maximum 5 values in `pile_tip_levels_nap`. 
          - maximum 10 values in `list_soil_properties`.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/bearing_calculation_multi_cpts_input"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
  /bearing/multiple-cpts/report:
    post:
      operationId: api.web.compression.generate_multiple_cpts_report
      summary: >-
        Generate a report for a pile calculation of multiple cpts and get the id
        of the task back.
      tags:
        - Report
        - Bearing
      description: >
        This endpoint will generate a report based on a template. The template
        contains:
          - Pile specifications
          - Pile factors
          - Safety factors
          - cpts info
          - Combined results of the calculation per pile tip level
          - Plot bearing capacity

        ## Free account usage

        This endpoint can be called with CEMS-Nuclei free-tier users with the
        following restrictions:

          - maximum 5 values in `pile_tip_levels_nap`. 
          - maximum 10 values in `list_soil_properties`.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/input_multi_cpt_report"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
  /pile-properties/shape:
    post:
      operationId: api.web.piles.get_shape_params
      summary: Get pile shape factors
      description: Returns the pile shape factors for the given pile dimensions.
      tags:
        - Pile properties
      requestBody:
        content:
          application/json:
            schema:
              type: object
              description: >
                The geometry of the pile. The geometry is defined by one or more
                pile

                components. A friction angle at pile-tip level is also required.


                The material definitions are ignored for this endpoint. They are
                only

                accepted to keep the schema consistent with the pile input in
                other

                endpoints.
              properties:
                components:
                  $ref: "#/components/schemas/pile_geometry_components_input"
                phi:
                  type: number
                  description: >
                    Degree of internal friction [deg] of the soil at
                    pile-tip-level. Defaults to 40 degrees which implies the
                    assumption that the pile-tip is in a firm sand layer.
                  default: 40
                  minimum: 0
              required:
                - components
              example:
                components:
                  - outer_shape: rectangle
                    secondary_dimension: 0.35
                phi: 40
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/pile_shape_properties_output"
  /pile-properties/type:
    post:
      operationId: api.web.piles.get_type_params
      summary: Get pile type factors
      description: Returns the pile type factors for the given default pile type.
      tags:
        - Pile properties
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                norms:
                  $ref: "#/components/schemas/norms_schema"
                pile_properties:
                  anyOf:
                    - $ref: "#/components/schemas/pile_standard_input_nen"
                    - $ref: "#/components/schemas/pile_standard_input_cur"
              required:
                - pile_properties
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/pile_type_properties_output"
  /friction-ranges/lower-bound:
    post:
      operationId: api.web.friction_ranges.lower_bound
      summary: Calculate the lower-bound friction ranges of a single CPT.
      tags:
        - Friction ranges
      description: >-
        Returns negative and positive lower-bound friction ranges of a single
        CPT.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/input_friction_ranges_lower_bound"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
  /grouper/group-cpts:
    post:
      operationId: api.web.grouper.group_cpts
      summary: Find groups among the calulated bearing capacities
      tags:
        - Grouper
      description: >
        Based on the bearing capacities and coordinates of a CPT a cluster
        algorithm tries to find valid CPT subgroups.

        Valid subgroups have:

          - valid bearing capacities with a variation coefficient lower than 12%;
          - a valid spatial orientation between CPTs.

        After finding many subgroups, only those groups are returned that result in the
        highest overall bearing capacity for at least one pile tip level and CPT
        combination.

        ## Free account usage

        This endpoint can be called with CEMS-Nuclei free-tier users with the
        following restrictions:

        - maximum 30 values in `cpt_objects`.
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/shared_input_groups_cpt_objects"
                - $ref: "#/components/schemas/shared_input_groups_meta_data"
                - $ref: "#/components/schemas/input_groups_cpts_filter"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
  /grouper/group-metrics:
    post:
      operationId: api.web.grouper.group_metrics
      summary: Check groups and return metrics for each group.
      tags:
        - Grouper
      description: >
        Takes sub-group configurations and returns group metrics such as
        Variation coefficient and xi factors, as well as group validity
        statements.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/input_group_metrics"
      responses:
        "200":
          description: >-
            Grouper result object contains an array of subgroups. For every
            subgroup the names of the locations are provide. Also the variation
            coefficient netto bearing capacity, xi values and checks are given.
            Note that for scenarios where not al cpts are within a subgroup a
            residual subgroup can be append based on the `sort_values_by`
            method.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_grouper"
  /uplift/nen/multiple-cpts/results:
    post:
      operationId: api.web.tension.calculation_tension_multi_cpt_nen
      summary: Run an uplift calculation of a single CPT based on NEN9997-1.
      tags:
        - Uplift
      description: >
        Takes sub-group configurations and returns group metrics such as
        Variation coefficient and xi factors, as well as group validity
        statements.
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/nen_uplift_properties"
                - type: object
                  properties:
                    list_soil_properties:
                      minItems: 1
                      type: array
                      items:
                        $ref: "#/components/schemas/soil_properties_uplift_input"
                    compute_stiffness:
                      type: boolean
                      default: true
                      description: >
                        Whether or not to compute the pile rise and stiffness (SLS). By disabling this flag the result
                        will only include uplift capacity results. All results related to the pile rise and stiffness (SLS) 
                        calculation will be null (`s;e`, `s;b`, `s;1`, `k;v;b` and `k;v;1`). This will speed up the 
                        calculation and allowing the user to quickly obtain the uplift capacity results.
                  required:
                    - list_soil_properties
                    - pile_properties
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
  /uplift/cur/multiple-cpts/results:
    post:
      operationId: api.web.tension.calculation_tension_multi_cpt_cur
      summary: Run an uplift calculation of a single CPT based on CUR236.
      tags:
        - Uplift
      description: >
        Takes sub-group configurations and returns group metrics such as
        Variation coefficient and xi factors, as well as group validity
        statements.
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/cur_uplift_properties"
                - type: object
                  properties:
                    list_soil_properties:
                      minItems: 1
                      type: array
                      items:
                        $ref: "#/components/schemas/soil_properties_uplift_input"
                    compute_stiffness:
                      type: boolean
                      default: true
                      description: >
                        Whether or not to compute the pile rise and stiffness (SLS). By disabling this flag the result
                        will only include uplift capacity results. All results related to the pile rise and stiffness (SLS) 
                        calculation will be null (`s;e`, `s;b`, `s;1`, `k;v;b` and `k;v;1`). This will speed up the 
                        calculation and allowing the user to quickly obtain the uplift capacity results.
                  required:
                    - list_soil_properties
                    - pile_properties
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
  /uplift/nen/multiple-cpts/report:
    post:
      operationId: api.web.tension.calculation_tension_multi_cpt_nen_report
      summary: Run an uplift calculation for multiple CPTs CPT based on NEN9997-1.
      tags:
        - Report
        - Uplift
      description: >
        Takes sub-group configurations and returns group metrics such as
        Variation coefficient and xi factors, as well as group validity
        statements.
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/nen_uplift_properties"
                - type: object
                  properties:
                    list_soil_properties:
                      minItems: 1
                      type: array
                      items:
                        $ref: "#/components/schemas/soil_properties_uplift_input"
                    general:
                      $ref: "#/components/schemas/report_general"
                  required:
                    - list_soil_properties
                    - pile_properties
                    - general
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
  /uplift/cur/multiple-cpts/report:
    post:
      operationId: api.web.tension.calculation_tension_multi_cpt_cur_report
      summary: Run an uplift calculation for multiple CPTs based on CUR236.
      tags:
        - Report
        - Uplift
      description: >
        Takes sub-group configurations and returns group metrics such as
        Variation coefficient and xi factors, as well as group validity
        statements.
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - $ref: "#/components/schemas/cur_uplift_properties"
                - type: object
                  properties:
                    list_soil_properties:
                      minItems: 1
                      type: array
                      items:
                        $ref: "#/components/schemas/soil_properties_uplift_input"
                    general:
                      $ref: "#/components/schemas/report_general"
                  required:
                    - list_soil_properties
                    - pile_properties
                    - general
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/output_task_id"
components:
  schemas:
    norms_schema:
      type: object
      properties:
        norms:
          type: object
          properties:
            NEN99971_version:
              type: string
              description: NEN 9997-1 standard for pile design.
              enum:
                - "2017"
                - "2025"
              default: "2017"
            CUR236_version:
              type: string
              description: CUR236 standard for pile design.
              enum:
                - "2023"
              default: "2023"

    overrule_xi:
      oneOf:
        - type: object
          properties:
            xi3:
              type: number
            xi4:
              type: number
            xi4_single:
              type: number
        - type: number
      description: >
        Set custom values for the correlation factors xi3, xi4 or xi4_single in all calculations. 
        Use with caution. This will  overrule the calculation of xi-values based on the
        group-size, variation- coefficient and construction stiffness according to NEN 9997-1+C2_2017
        Table A.10a and A.10b. Used to calculate the characteristic value of the
        bearing capacity: R_c;k = R_c;cal / xi.


        You can set a single value, resulting in xi3=xi4=xi4_single=<your_value>
        or provide individual values for the different cases such as:
        overrule_xi = {xi3 : .. , xi4: .. , xi4_single: ..}


        - xi3 refers to the correlation factor for groups of CPTs with variation =< 12%

        - xi4 refers to the correlation factor for groups of CPTs with variation > 12%

        - xi4_single refers to the correlation factor for single CPTs


        **unit: `-`**


        ### Correlation factors for non-stiff construction:

        | ξ for n = | 1    | 2    | 3    | 4    | 5    | 7    | 10   |

        |-----------|------|------|------|------|------|------|------| 

        | ξ_3       | 1.39 | 1.32 | 1.30 | 1.28 | 1.28 | 1.27 | 1.25 | 

        | ξ_4       | 1.39 | 1.32 | 1.30 | 1.03 | 1.03 | 1.01 | 1.00 |


        ### Correlation factors for stiff construction:

        | ξ for n = | 1    | 2    | 3    | 4    | 5    | 7    | 10   |

        |-----------|------|------|------|------|------|------|------| 

        | ξ_3       | 1.26 | 1.20 | 1.18 | 1.17 | 1.17 | 1.15 | 1.14 | 

        | ξ_4       | 1.26 | 0.96 | 0.94 | 0.93 | 0.93 | 0.92 | 0.91 |
    friction_settings:
      title: Friction settings
      oneOf:
        - title: Automatic ranges
          type: object
          properties:
            friction_range_strategy:
              $ref: "#/components/schemas/automatic_friction_range_strategy"
            negative_friction:
              $ref: "#/components/schemas/negative_friction"
          required:
            - friction_range_strategy
          additionalProperties: false
        - title: Manual ranges
          type: object
          properties:
            friction_range_strategy:
              $ref: "#/components/schemas/manual_friction_range_strategy"
            negative_friction_range_nap:
              $ref: "#/components/schemas/negative_friction_range_nap"
            positive_friction_range_nap:
              $ref: "#/components/schemas/positive_friction_range_nap"
          required:
            - friction_range_strategy
            - negative_friction_range_nap
            - positive_friction_range_nap
          additionalProperties: false
        - title: Manual positive range only
          type: object
          properties:
            friction_range_strategy:
              $ref: "#/components/schemas/manual_friction_range_strategy"
            negative_friction:
              $ref: "#/components/schemas/negative_friction"
            positive_friction_range_nap:
              $ref: "#/components/schemas/positive_friction_range_nap"
          required:
            - friction_range_strategy
            - negative_friction
            - positive_friction_range_nap
          additionalProperties: false
      default: { "friction_range_strategy": "lower_bound" }
    negative_friction:
      type: number
      minimum: 0
      description: >
        Adding this property will set a fixed value for the negative friction force.

        **unit: `kN`**
    negative_friction_range_nap:
      type: array
      items:
        type: number
      description: >
        Sets the fixed depth range between which the negative sleeve friction is
        calculated. Should be an array object with two values: [top, bottom] in
        unit `[m] w.r.t NAP`.

        This property is only allowed and required if `friction_range_strategy`
        = "manual".

        ### Examples

        * `[-1.9, -5.3]` * `[-3.1, -4.9]`
      minItems: 2
      maxItems: 2
      example: [-1.9, -5.3]
    positive_friction_range_nap:
      type: array
      items:
        anyOf:
          - type: number
          - type: string
            enum:
              - ptl
      description: >
        Sets the fixed depth range between which the positive sleeve friction is
        calculated. Should be an array object with two values: [top, bottom] in
        unit `[m] w.r.t NAP`.

        If bottom == "ptl", the pile tip level of the calculation is used as
        value for bottom.

        This property is only allowed and required if `friction_range_strategy`
        = "manual".

        ### Examples

        * `[-17.3, "ptl"]` * `[-8.1, -14.9]`
      minItems: 2
      maxItems: 2
      example: [-17.3, "ptl"]
    nen_pile_properties_input:
      type: object
      description: >
        The definition of the pile used in the bearing calculations. Contains
        two main

        parts: the `geometry` defines the shape and materials of the pile, and
        the

        `pile_type` defines properties associated with the pile type and

        installation method.
      properties:
        name:
          type: string
          description: Name of the pile
        geometry:
          $ref: "#/components/schemas/pile_geometry_input"
        pile_type:
          anyOf:
            - title: Standard Pile
              type: object
              description: >
                Define the pile type specifications by selecting a reference from
                NEN9997-1. Optionally, individual standard settings can be overruled
                in the custom_properties.
              properties:
                standard_pile:
                  $ref: "#/components/schemas/pile_standard_input_nen"
                custom_properties:
                  $ref: "#/components/schemas/nen_pile_type_properties_input_optional"
              required:
                - standard_pile
            - title: Custom Pile
              type: object
              description: >
                Define the pile type specifications fully custom by specifying all
                properties in the custom_properties.
              properties:
                custom_properties:
                  $ref: "#/components/schemas/nen_pile_type_properties_input_required"
              required:
                - custom_properties
      required:
        - geometry
        - pile_type
      example:
        name: Prefab 350x350
        geometry:
          components:
            - outer_shape: rectangle
              secondary_dimension: 0.35
        pile_type:
          standard_pile:
            reference: "B1"
    nen_pile_type_properties_input_optional:
      type: object
      description: >
        Custom pile type properties for piles according to the NEN9997-1 standard.
      properties:
        alpha_s_sand:
          $ref: "#/components/schemas/alpha_s_sand"
        alpha_s_clay:
          $ref: "#/components/schemas/alpha_s_clay"
        alpha_p:
          $ref: "#/components/schemas/alpha_p"
        alpha_t_sand:
          $ref: "#/components/schemas/alpha_t_sand"
        settlement_curve:
          $ref: "#/components/schemas/settlement_curve"
        negative_fr_delta_factor:
          $ref: "#/components/schemas/negative_fr_delta_factor"
        adhesion:
          $ref: "#/components/schemas/adhesion"
        is_auger:
          $ref: "#/components/schemas/is_auger"
        installation_method:
          $ref: "#/components/schemas/installation_method"
        is_low_vibrating:
          $ref: "#/components/schemas/is_low_vibrating"
        is_prefab:
          $ref: "#/components/schemas/is_prefab"
        is_open_ended:
          $ref: "#/components/schemas/is_open_ended"
        qc_z_a_lesser_1m:
          $ref: "#/components/schemas/qc_z_a_lesser_1m"
        qc_z_a_greater_1m:
          $ref: "#/components/schemas/qc_z_a_greater_1m"
        qb_max_limit:
          $ref: "#/components/schemas/qb_max_limit"
    nen_pile_type_properties_input_required:
      allOf:
        - $ref: "#/components/schemas/nen_pile_type_properties_input_optional"
      required:
        - alpha_s_sand
        - alpha_p
        - alpha_t_sand
        - settlement_curve
        - negative_fr_delta_factor
        - is_auger
        - installation_method
        - is_prefab
        - is_open_ended
    cur_pile_properties_input:
      type: object
      description: >
        The definition of the pile used in the bearing calculations. Contains
        two main

        parts: the `geometry` defines the shape and materials of the pile, and
        the

        `pile_type` defines properties associated with the pile type and

        installation method.
      properties:
        name:
          type: string
          description: Name of the pile
        geometry:
          type: object
          description: >
            The geometry of the pile. The geometry is defined by one or more
            pile components and the materials that are used for these
            components.
          properties:
            components:
              type: array
              description: >
                Array of pile components. A maximum of two components are
                allowed. These components should have the same outer-shape (e.g.
                round or rectangular). The first component is the core of the
                pile. Each subsequent component should be a shell around the
                previous component.

                Current functionality only supports a core component with a
                linear-elastic material, and an optional second component. The
                second component can represent the shape of a widened base (with
                the same material as the core), or a grout shell (with
                elasto-pastic material).

                In future updates it will be possible to add more components
                with different shapes and materials, thereby allowing for more
                complex pile shapes, such as steel tubes, DPA piles, or concrete
                piles with a hollow core.
              minItems: 1
              maxItems: 2
              items:
                $ref: "#/components/schemas/round_pile_geometry_component_input"
            materials:
              type: array
              description: >
                Array of materials that can be assigned to the pile components.


                If no material is specified, PileCore will use the default
                material

                properties in accordance with the `standard_pile` property.
              items:
                anyOf:
                  - $ref: "#/components/schemas/linear_elastic_material"
                  - $ref: "#/components/schemas/elasto_plastic_material"
                  - $ref: "#/components/schemas/elasto_brittle_material"
              uniqueItems: true
        pile_type:
          anyOf:
            - title: Standard Pile
              type: object
              description: >
                Define the pile type specifications by selecting a reference from
                CUR-236. Optionally, individual standard settings can be overruled
                in the custom_properties.
              properties:
                standard_pile:
                  $ref: "#/components/schemas/pile_standard_input_cur"
                custom_properties:
                  $ref: "#/components/schemas/cur_pile_type_properties_input_optional"
              required:
                - standard_pile
            - title: Custom Pile
              type: object
              description: >
                Define the pile type specifications fully custom by specifying all
                properties in the custom_properties.
              properties:
                custom_properties:
                  $ref: "#/components/schemas/cur_pile_type_properties_input_required"
              required:
                - custom_properties
      required:
        - geometry
        - pile_type
      example:
        name: Prefab 350x350
        geometry:
          components:
            - outer_shape: round
              diameter: 0.1
            - outer_shape: round
              diameter: 0.35
              length: 9
        pile_type:
          standard_pile:
            reference: "AA1"
    pile_standard_input_nen:
      title: NEN9997-1 Standard Pile
      type: object
      description: >
        Select standard pile specifications from the NEN9997-1 standard.

        The `standard_pile` properties can be determined using the tables shown
        below, in combination with the chosen NEN9997-1 version in the norms property
        (default=2025).

        ![standard_piles-NEN9997-1 (2025)](./../static?filename=standard_piles-NEN9997-1_2025.png)

        When using the 2017 version of the NEN9997-1, the following table applies:
        [standard_piles-NEN9997-1 (2017)](./../static?filename=standard_piles-NEN9997-1_2017.png)
      properties:
        reference:
          type: string
          enum:
            - "B1"
            - "B2"
            - "B3"
            - "B4"
            - "B5"
            - "B6"
            - "B7"
            - "B8"
            - "S1"
            - "S2"
            - "S4"
            - "S3"
            - "S5"
            - "S6"
            - "S7"
            - "H1"
            - "H2"
            - "MA1"
            - "MA2"
            - "MB1"
            - "MB2"
            - "MC"
            - "MD"
            - "ME"
            - "MF"
      required:
        - reference
      example:
        reference: "B1"
    pile_standard_input_cur:
      title: CUR-236 Standard Pile
      type: object
      description: >
        Select standard pile specifications from the CUR-236 standard.

        The `standard_pile` properties can be determined using the tables shown
        below.


        ![standard_piles-CUR236](./../static?filename=standard_piles-CUR236_2023.png)
        [standard_piles-CUR236](./../static?filename=standard_piles-CUR236_2023.png)
      properties:
        reference:
          type: string
          enum:
            - "AA1"
            - "AA2"
            - "AB1"
            - "AB2"
            - "AC"
            - "AD"
            - "AE"
      required:
        - reference
      example:
        reference: "AA1"
    cur_pile_type_properties_input_optional:
      type: object
      description: >
        Custom pile type properties for piles according to the CUR-236 standard.
      properties:
        alpha_s_sand:
          $ref: "#/components/schemas/alpha_s_sand"
        alpha_s_clay:
          $ref: "#/components/schemas/alpha_s_clay"
        alpha_p:
          $ref: "#/components/schemas/alpha_p"
        alpha_t_sand:
          $ref: "#/components/schemas/alpha_t_sand"
        settlement_curve:
          $ref: "#/components/schemas/settlement_curve"
        negative_fr_delta_factor:
          $ref: "#/components/schemas/negative_fr_delta_factor"
        adhesion:
          $ref: "#/components/schemas/adhesion"
        is_auger:
          $ref: "#/components/schemas/is_auger"
        installation_method:
          $ref: "#/components/schemas/installation_method"
        is_low_vibrating:
          $ref: "#/components/schemas/is_low_vibrating"
        is_prefab:
          $ref: "#/components/schemas/is_prefab"
        is_open_ended:
          $ref: "#/components/schemas/is_open_ended"
        chamfered:
          $ref: "#/components/schemas/chamfered"
    cur_pile_type_properties_input_required:
      allOf:
        - $ref: "#/components/schemas/cur_pile_type_properties_input_optional"
      required:
        - alpha_s_sand
        - alpha_p
        - alpha_t_sand
        - settlement_curve
        - negative_fr_delta_factor
        - is_auger
        - installation_method
        - is_prefab
        - is_open_ended
        - chamfered
    pile_geometry_input:
      type: object
      description: >
        The geometry of the pile. The geometry is defined by one or more pile
        components and the materials that are used for these components.
      properties:
        components:
          $ref: "#/components/schemas/pile_geometry_components_input"
        materials:
          type: array
          description: |
            Array of materials that can be assigned to the pile components.

            If no material is specified, PileCore will use the default material
            properties in accordance with the `standard_pile` property.
          items:
            anyOf:
              - $ref: "#/components/schemas/linear_elastic_material"
              - $ref: "#/components/schemas/elasto_plastic_material"
              - $ref: "#/components/schemas/elasto_brittle_material"
          uniqueItems: true
        custom_properties:
          type: object
          description: |
            Custom pile shape properties.
          properties:
            pile_tip_factor_s:
              type: number
              description: >
                Factor s used in pile tip resistance calculation as per NEN
                9997-1 7.6.2.3 (h).

                If omited, the pile_tip_factor_s is inferred from the
                pile dimensions and soil properties. Providing a number here
                will overrule the pile_tip_factor_s for all pile tip levels.

                **unit: `-`**
            beta_p:
              type: number
              description: >
                Factor s used in pile tip resistance calculation as per NEN
                9997-1 7.6.2.3 (h).

                The value is inferred from the dimensions of the pile components by
                default, but can be overwritten.

                **unit: `-`**
      required:
        - components
    pile_geometry_components_input:
      type: array
      description: >
        Array of pile components. A maximum of two components are allowed. These
        components should have the same outer-shape (e.g. round or rectangular).
        The first component is the core of the pile. Each subsequent component
        should be a shell around the previous component.

        Current functionality only supports a core component with a
        linear-elastic material, and an optional second component. The second
        component can represent the shape of a widened base (with the same
        material as the core), or a grout shell (with elasto-pastic material).

        In future updates it will be possible to add more components with
        different shapes and materials, thereby allowing for more complex pile
        shapes, such as steel tubes, DPA piles, or concrete piles with a hollow
        core.
      minItems: 1
      maxItems: 2
      items:
        oneOf:
          - $ref: "#/components/schemas/rectangular_pile_geometry_component_input"
          - $ref: "#/components/schemas/round_pile_geometry_component_input"
    pile_geometry_output:
      type: object
      description: >
        The geometry of the pile. The geometry is defined by one or more pile
        components and the materials that are used for these components.
      properties:
        components:
          type: array
          description: |
            Array of pile components.
          items:
            oneOf:
              - $ref: >-
                  #/components/schemas/rectangular_pile_geometry_component_output
              - $ref: "#/components/schemas/round_pile_geometry_component_output"
        materials:
          type: array
          description: |
            Array of materials that are assigned to the pile components.
          items:
            anyOf:
              - $ref: "#/components/schemas/linear_elastic_material"
              - $ref: "#/components/schemas/elasto_plastic_material"
              - $ref: "#/components/schemas/elasto_brittle_material"
          uniqueItems: true
        properties:
          $ref: "#/components/schemas/pile_shape_properties_output"
      required:
        - components
        - materials
        - properties
    linear_elastic_material:
      type: object
      description: |
        Material with linear elastic behaviour.
      properties:
        name:
          type: string
          description: Name of the material. Each material has a unique name.
        elastic_modulus:
          type: number
          example: 20000
          description: |
            Modulus of elasticity (Young's modulus) of the pile.
            **unit: Mpa**
        color:
          oneOf:
            - $ref: "#/components/schemas/html_colour"
            - $ref: "#/components/schemas/rgb_colour"
      additionalProperties: false
      required:
        - name
        - elastic_modulus
        - color
    elasto_brittle_material:
      type: object
      description: >
        Material with elastic-perfectly brittle behaviour. The material is
        defined by the elastic modulus and the tensile strength. Once the
        tensile strength is reached, the material will abruptly reduce its
        tensile strength to zero, meaning that it will not be capable to sustain
        tensile stresses any more. Linear elastic behaviour is used in
        bearing.
      properties:
        name:
          type: string
          description: Name of the material. Each material has a unique name.
        elastic_modulus:
          type: number
          example: 20000
          description: |
            Modulus of elasticity (Young's modulus) of the pile.
            **unit: Mpa**
        color:
          oneOf:
            - $ref: "#/components/schemas/html_colour"
            - $ref: "#/components/schemas/rgb_colour"
        tensile_strength:
          type: number
          minimum: 0
          description: |
            tensile stress of the pile.
            **unit: kN/m2**
      additionalProperties: false
      required:
        - name
        - elastic_modulus
        - tensile_strength
        - color
    elasto_plastic_material:
      type: object
      description: >
        Material with elasto-plastic behaviour with perfect plasticity. The
        material is defined by the elastic modulus and the yield stress. Once
        the yield stress is reached, the material will deform plastically and
        the stress will remain constant (i.e. failure). No plastic deformation
        occurs for bearing stresses.
      properties:
        name:
          type: string
          description: Name of the material. Each material has a unique name.
        elastic_modulus:
          type: number
          example: 20000
          description: |
            Modulus of elasticity (Young's modulus) of the pile.
            **unit: Mpa**
        color:
          oneOf:
            - $ref: "#/components/schemas/html_colour"
            - $ref: "#/components/schemas/rgb_colour"
        yield_stress:
          type: number
          minimum: 0
          description: |
            Yield stress of the pile.
            **unit: MPa**
      additionalProperties: false
      required:
        - name
        - elastic_modulus
        - yield_stress
        - color
    html_colour:
      type: string
      description: >-
        HTML-hex color definition. Should start with an `#`. E.g. `#FF0000` for
        red.
    rgb_colour:
      type: object
      description: RGB color definition.
      properties:
        r:
          type: number
          minimum: 0
          maximum: 255
        g:
          type: number
          minimum: 0
          maximum: 255
        b:
          type: number
          minimum: 0
          maximum: 255
      required:
        - r
        - g
        - b
    pile_geometry_component_common_input:
      type: object
      properties:
        material:
          type: string
          description: >
            Name of the material that is used for the component. See the
            `materials`

            property of the `pile_properties` object.


            If no material is provided, PileCore will use the default material
            properties

            in accordance with the `pile_type` property.
        primary_dimension:
          type: object
          description: >
            The primary dimension of the pile component, in the direction of the
            pile's primary axis. 

            When omitted, the primary dimension is assumed to be equal to the
            pile's primary dimension: starting at the pile-head and ending at
            the pile-tip. When a length is provided for the component, the
            component is assumed to start at the pile-tip.

            In future updates it will be possible to provide top and bottom
            levels for each individual pile component, therefore making it
            possible to define more complex pile shapes.
          properties:
            length:
              type: number
              minimum: 0
              description: >
                The length of the pile component. This is the distance between
                the top and bottom level of the component.

                The core of the pile (i.e. the first component in the list)
                cannot have a length, as it is assumed to be defined by the
                pile-head level and the pile-tip levels.

                The length of any subsequent component cannot be greater than
                that of the previous component.

                **unit: `m`**
          required:
            - length
    pile_geometry_component_common_output:
      type: object
      properties:
        material:
          type: string
          description: >
            Name of the material that is used for the component. See the
            `materials`

            property of the `pile_properties` object.
        primary_dimension:
          type: object
          description: >
            The primary dimension of the pile component, measured in the
            direction of  the pile's primary axis.
          properties:
            length:
              type: number
              nullable: true
              minimum: 0
              description: >
                The length of the pile component. This is the distance between
                the top and bottom level of the component. Returns `null` if the
                value follows from other geometric properties which might vary,
                such as the head or tip level of the pile.

                **unit: `m`**
            top_level_nap:
              oneOf:
                - type: number
                  nullable: true
                - type: string
                  enum:
                    - pile-head
                  nullable: true
              description: >
                The top level of the pile component. This is the level where the
                component starts. Returns "pile-head" if the value is equal to
                the pile-head level. Returns `null` if the value follows from
                other geometric properties which might vary, such as the head or
                tip level of the pile.

                **unit: `m w.r.t. NAP`**
            bottom_level_nap:
              oneOf:
                - type: number
                  nullable: true
                - type: string
                  enum:
                    - pile-tip
                  nullable: true
              description: >
                The bottom level of the pile component. This is the level where
                the component ends. Returns "pile-tip" if the value is equal to
                the pile-tip level. Returns `null` if the value follows from
                other geometric properties which might vary, such as the head or
                tip level of the pile.

                **unit: `m w.r.t. NAP`**
          required:
            - length
            - top_level_nap
            - bottom_level_nap
      required:
        - material
        - primary_dimension
    rectangular_pile_geometry_component_input:
      allOf:
        - $ref: "#/components/schemas/pile_geometry_component_common_input"
        - type: object
          description: Defines pile component with a rectangular outer-shape.
          properties:
            outer_shape:
              type: string
              enum:
                - rectangle
                - rect
              description: |
                The outer shape of the pile component.
            secondary_dimension:
              type: number
              minimum: 0.05
              maximum: 1.5
              example: 0.35
              description: >
                The secondary dimension of a pile component with rectangular
                shape. This is the largest outer dimension of the component's
                cross-section.

                **unit: `m`**
            tertiary_dimension:
              type: number
              minimum: 0.05
              maximum: 1.5
              example: 0.35
              description: >
                The tertiary dimension of a pile component with rectangular
                shape. This is the smallest outer dimension of the component's
                cross-section. If not provided, a square cross-section is
                assumed.

                **unit: `m`**
          required:
            - outer_shape
            - secondary_dimension
    rectangular_pile_geometry_component_output:
      allOf:
        - $ref: "#/components/schemas/pile_geometry_component_common_output"
        - type: object
          description: Defines pile component with a rectangular outer-shape.
          properties:
            outer_shape:
              type: string
              enum:
                - rectangle
              description: |
                The outer shape of the pile component.
            secondary_dimension:
              type: number
              example: 0.35
              description: >
                The secondary dimension of a pile component with rectangular
                shape. This is the largest outer dimension of the component's
                cross-section.

                **unit: `m`**
            tertiary_dimension:
              type: number
              example: 0.35
              description: >
                The tertiary dimension of a pile component with rectangular
                shape. This is the smallest outer dimension of the component's
                cross-section.

                **unit: `m`**
          required:
            - outer_shape
            - secondary_dimension
            - tertiary_dimension
    round_pile_geometry_component_input:
      allOf:
        - $ref: "#/components/schemas/pile_geometry_component_common_input"
        - type: object
          description: Defines pile component with a round outer-shape.
          properties:
            outer_shape:
              type: string
              enum:
                - round
              description: |
                The outer shape of the pile component.
            diameter:
              type: number
              minimum: 0.05
              maximum: 1.5
              example: 0.56
              description: |
                The outer-diameter of a pile component with round shape.
                **unit: `m`**
          required:
            - outer_shape
            - diameter
    round_pile_geometry_component_output:
      allOf:
        - $ref: "#/components/schemas/pile_geometry_component_common_output"
        - type: object
          description: Defines pile component with a round outer-shape.
          properties:
            outer_shape:
              type: string
              enum:
                - round
              description: |
                The outer shape of the pile component.
            diameter:
              type: number
              example: 0.56
              description: |
                The outer-diameter of a pile component with round shape.
                **unit: `m`**
          required:
            - outer_shape
            - diameter
    pile_properties_output:
      type: object
      description: >
        The definition of the pile used in the bearing calculations. Contains
        two main

        parts: the `geometry` defines the shape and materials of the pile, and
        the

        `pile_type` defines properties associated with the pile type and

        installation method.
      properties:
        name:
          type: string
          example: Prefab 350x350
          description: Name of the pile
        geometry:
          $ref: "#/components/schemas/pile_geometry_output"
        pile_type:
          type: object
          description: >
            The pile type specifications of the pile. Defines all properties and
            calculation factors associated with the pile type and installation
            method. The pile type specifications for bearing piles and
            uplift piles according to the NEN9997-1 standard.
          properties:
            standard_pile:
              oneOf:
                - $ref: "#/components/schemas/pile_standard_input_nen"
                - $ref: "#/components/schemas/pile_standard_input_cur"
            properties:
              $ref: "#/components/schemas/pile_type_properties_output"
          required:
            - properties
      required:
        - name
        - geometry
        - pile_type
      example:
        name: Prefab 350x350
        geometry:
          components:
            - outer_shape: rectangle
              primary_dimension:
                length: null
                top_level_nap: null
                bottom_level_nap: null
              secondary_dimension: 0.35
              tertiary_dimension: 0.35
              material: concrete
          materials:
            - name: concrete
              elastic_modulus: 20000
              color: "#525252"
          properties:
            pile_tip_factor_s: 1
            beta_p: 1
        pile_type:
          standard_pile:
            reference: "B1"
          properties:
            alpha_s_sand: 0.01
            alpha_s_clay:
              use_constant_value: false
            alpha_p: 0.7
            alpha_t_sand: 0.007
            alpha_t_clay:
              use_constant_value: false
            settlement_curve: 1
            negative_fr_delta_factor: 0.75
            adhesion: null
            is_low_vibrating: false
            is_auger: false
            installation_method: excavated
            is_prefab: true
            is_open_ended: false
            is_anchor: false
            chamfer_value: null
            is_load_tested: null
            is_extorted: null
            qc_z_a_lesser_1m: 12.0
            qc_z_a_greater_1m: 15.0
            qb_max_limit: 15.0
    input_pile_calculation_common:
      type: object
      properties:
        pile_properties:
          $ref: "#/components/schemas/nen_pile_properties_input"
        pile_load:
          type: number
          description: >
            Force on pile in SLS. Used to determine settlement of pile w.r.t.
            soil.

            **unit: `kN`**
          example: 1000
        rel_pile_load:
          type: number
          default: 0.7
          minimum: 0
          maximum: 1
          description: >
            The fraction of the maximum bearing capacity that is used as pile
            head force in the settlement calculations.

            The input value can range between 0.0 and 1.0, where 1.0 translates
            to a pile load of 100% of the maximum

            bearing capacity. When the *pile_load* parameter is provided,
            *rel_pile_load* will be ignored.


            When multiple pile-tip levels are considered, the applied pile load
            will vary with each pile-tip level,

            depending on the bearing capacity.
        pile_head_level_nap:
          $ref: "#/components/schemas/pile_head_level_nap_input"
        excavation_depth_nap:
          $ref: "#/components/schemas/excavation_depth_nap_input"
        excavation_param_t:
          type: number
          enum:
            - 1
            - 0.5
          description: >
            Excavation parameter depending on pile installation method and/or
            phasing.

             - Use 1.0 for post-excavation installation with vibration (i.e. hammering). 
             - Use 0.5 for reduced-vibration installation, or pile installation prior to excavation method. 

            See for more info **NEN 9997-1+C2:2017 7.6.2.3.(10)(k)**
          default: 1
        excavation_settings:
          oneOf:
            - $ref: "#/components/schemas/excavation_settings_constant_method"
            - $ref: "#/components/schemas/excavation_settings_begemann_method"
          description: >
            Settings for the calculation of the stress reduction due to the
            excavation applied to the effective and total stresses.</br>

            The stress reduction method can be either `constant` or `begemann`. 
            Note that each method has its required settings.</br>

            Defaults to the `constant` method.
          example:
            stress_reduction_method: constant
        norms:
          $ref: "#/components/schemas/norms_schema"
    input_pile_calculation_common_bearing:
      type: object
      properties:
        friction_settings:
          allOf:
            - type: object
              description: >
                General sleeve friction settings for all CPTs.
            - $ref: "#/components/schemas/friction_settings"
        soil_load:
          type: number
          default: 0
          description: >
            (Fictive) load on soil used to calculate soil settlement. This is
            required and used to determine settlement of pile w.r.t. soil.


            **unit: `kPa`**
          example: 25
        gamma_f_nk:
          type: number
          default: 1
          description: >
            Safety factor for design-values of the negative sleeve friction
            force.

            **unit: `-`**
        gamma_r_b:
          type: number
          default: 1.2
          description: >
            Safety factor, used to obtain design-values of the pile-tip
            bearingcapacity.

            **unit: `-`**
        gamma_r_s:
          type: number
          default: 1.2
          description: >
            Safety factor, used to obtain design-values of the sleeve
            bearingcapacity.

            **unit: `-`**
        use_almere_rules:
          type: boolean
          default: false
          description: >
            If set to True, then the following rules are applied: 

            - the contribution, produced by the positive shaft
            friction, to the total bearing capacity is limited to at most 
            75% the contribution provided by the pile tip.

            ref:
            https://www.almere.nl/fileadmin/user_upload/Richtlijnen_Constructie_Gem._Almere_vanaf_01-01-2017_versie_3.0a.pdf

            - the maximum value allowed for the pile tip resistance `q_b_max` is
            12 MPa unless a lower value is specified in `qb_max_limit` in the pile 
            properties.
        apply_qc3_reduction:
          type: boolean
          description: >
            Determines if the reduction on the qc;III trajectory for auger piles
            should be applied conform 7.6.2.3(e) of NEN 9997-1.

            Providing a boolean value for `apply_qc3_reduction` will overrule the
            default behaviour.

            If norm NEN-9997-1 version 2017 is selected, the qc3 reduction is by default
            applied for auger piles. If norm NEN-9997-1 version 2025 is selected, the
            qc3 is not applied by default.
        pile_tip_levels_nap:
          minItems: 1
          type: array
          items:
            type: number
          uniqueItems: true
          description: |
            Range of values for which the pile resistance is calculated.

            **unit: `m NAP`**
          example:
            - -5
            - -5.5
            - -6
      required:
        - pile_tip_levels_nap
    bearing_calculation_multi_cpts_input:
      allOf:
        - $ref: "#/components/schemas/input_pile_calculation_common"
        - $ref: "#/components/schemas/input_pile_calculation_common_bearing"
        - type: object
          properties:
            overrule_xi: 
              $ref: "#/components/schemas/overrule_xi"
            list_soil_properties:
              type: array
              description: >
                Each object in this array represents a single CPT. The optional
                fields will overwrite the 'general' value **for that CPT only**.

                Note that the report a with `individual_cpt_results` content accepts
                a maximum of 50 CPTs.
              minItems: 1
              items:
                allOf:
                  - $ref: "#/components/schemas/soil_properties"
                  - $ref: "#/components/schemas/soil_arguments_multi_cpt"
            stiff_construction:
              type: boolean
              default: false
              description: >
                Set to True if it's a stiff costruction. This will have
                influence on the xi factor.
            cpts_group:
              description: >-
                CPT that are considered one group. Items must relate to the CPT
                names in `list_soil_properties`
              type: array
              items:
                type: string
              uniqueItems: true
              example:
                - CPT101
          required:
            - pile_properties
            - list_soil_properties
            - pile_tip_levels_nap
    input_friction_ranges_lower_bound:
      type: object
      properties:
        soil_properties_list:
          $ref: "#/components/schemas/soil_properties_list"
        pile_tip_level_nap:
          type: number
          description: |
            Pile-tip level for which the friction range is determined.

            **unit: `m NAP`**
          example: -7
        pile_head_level_nap:
          $ref: "#/components/schemas/pile_head_level_nap_input"
        excavation_depth_nap:
          $ref: "#/components/schemas/excavation_depth_nap_input"
      example:
        pile_tip_level_nap: -0.7
        soil_properties_list:
            - coordinates:
                  x: 142892.19
                  y: 470783.87
              cpt_data:
                depth:
                  - 0
                  - 0.1
                  - 0.2
                  - 0.3
                  - 0.4
                  - 0.5
                  - 0.6
                  - 0.7
                  - 0.8
                  - 0.9
                  - 1
                qc:
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
              layer_table_data:
                lower_boundary:
                  - 0.5
                  - 2
                gamma_unsat:
                  - 15
                  - 19
                gamma_sat:
                  - 15
                  - 21
                index:
                  - 0
                  - 1
                phi:
                  - 0.2
                  - 0.4799655443
                main_component:
                  - clay
                  - sand
                thickness:
                  - 0.5
                  - 1.5
              ref_height: 0
              test_id: cpt_001
              water_pressure: 0.00981
            - coordinates:
                  x: 142892.19
                  y: 470783.87
              cpt_data:
                depth:
                  - 0
                  - 0.1
                  - 0.2
                  - 0.3
                  - 0.4
                  - 0.5
                  - 0.6
                  - 0.7
                  - 0.8
                  - 0.9
                  - 1
                qc:
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
                    - 1
              layer_table_data:
                lower_boundary:
                  - 0.5
                  - 2
                gamma_unsat:
                  - 15
                  - 19
                gamma_sat:
                  - 15
                  - 21
                index:
                  - 0
                  - 1
                phi:
                  - 0.2
                  - 0.4799655443
                main_component:
                  - clay
                  - sand
                thickness:
                  - 0.5
                  - 1.5
              ref_height: 0
              test_id: cpt_002
              water_pressure: 0.00981
      required:
        - soil_properties_list
        - pile_tip_level_nap
    output_friction_ranges_lower_bound:
      type: array
      items:
        type: object
        description: |
          Returns a JSON with a positive and a negative range.
        properties:
          positive_top:
            type: number
            description: |
              Start of the positive friction range in m w.r.t. NAP.
              **unit: `m`**
          positive_bottom:
            type: number
            description: |
              End of the positive friction range in m w.r.t. NAP.
              **unit: `m`**
          negative_top:
            type: number
            description: |
              Start of the negative friction range in m w.r.t. NAP.
              **unit: `m`**
          negative_bottom:
            type: number
            description: |
              End of the negative friction range in m w.r.t. NAP.
              **unit: `m`**
        required:
          - positive_top
          - positive_bottom
          - negative_top
          - negative_bottom
    output_task_state:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: ef37b13e-3205-45b6-aa7c-84523b5a3d76
        state:
          type: string
          enum:
            - PENDING
            - SUCCESS
            - FAILURE
          example: PENDING
    output_task_id:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: ef37b13e-3205-45b6-aa7c-84523b5a3d76
    output_task_status:
      type: string
      example: >-
        task with id d61cfc53-b1b4-4f40-8b09-23d439a0a635 is still
        running/pending
    output_task_report:
      type: string
      format: binary
    output_multi_cpt:
      type: object
      description: |
        An object with all Bearing calculation results for multiple CPTs.
      required:
        - calculation_params
        - pile_properties
        - group_results
        - cpts
      properties:
        calculation_params:
          $ref: "#/components/schemas/calculation_params_multi"
        pile_properties:
          $ref: "#/components/schemas/pile_properties_output"
        group_results:
          $ref: "#/components/schemas/group_results"
        cpts:
          minItems: 1
          type: array
          items:
            type: object
            required:
              - test_id
              - groundwater_level_nap
              - annotations
              - results_table
              - layer_table
            properties:
              test_id:
                type: string
                description: The identifier of the CPT.
                example: CPT101
              unique_id:
                type: string
                description: Unique identifier for the CPT (only if provided in request).
              groundwater_level_nap:
                type: number
                description: |
                  The ground water level, with respect to NAP.

                  **unit: `m NAP`**
              annotations:
                $ref: "#/components/schemas/annotations"
              cpt_chart:
                $ref: "#/components/schemas/cpt_chart"
              results_table:
                $ref: "#/components/schemas/results_table"
              layer_table:
                $ref: "#/components/schemas/layer_table_output"
              negative_friction_table:
                $ref: "#/components/schemas/negative_friction_table"
    pile_shape_properties_output:
      type: object
      properties:
        beta_p:
          type: number
          example: 1
          description: >
            Factor s used in pile tip resistance calculation as per NEN 9997-1
            7.6.2.3 (h).

            **unit: `-`**
        pile_tip_factor_s:
          type: number
          description: >
            Factor s used in pile tip resistance calculation as per NEN 9997-1
            7.6.2.3 (h).

            Only included in the payload if a fixed input value was provided. If
            not, the value depends on the pile dimensions and soil properties at
            pile-tip level and can be found in the bearing results table.

            **unit: `-`**
      required:
        - beta_p
    pile_type_properties_output:
      type: object
      properties:
        alpha_p:
          type: number
          example: 0.01
          description: |
            Alpha p factor used in pile tip resistance calculation.
            **unit: `-`**
        alpha_s_sand:
          type: number
          example: 0.01
          description: >
            Alpha s factor for coarse layers used in the positive friction
            calculation. 
            **unit: `-`**
        alpha_s_clay:
          $ref: "#/components/schemas/alpha_s_clay"
        alpha_t_sand:
          type: number
          example: 0.01
          description: |
            Alpha t factor used in uplift pile resistance calculation.
            **unit: `-`**
        alpha_t_clay:
          $ref: "#/components/schemas/alpha_t_clay"
        is_auger:
          type: boolean
          example: false
          description: |
            Determines whether the pile the pile is an auger pile or not.
        is_low_vibrating:
          type: boolean
          example: true
          description: >
            Determines whether the pile has an installation type with low
            vibration.
        negative_fr_delta_factor:
          type: number
          example: 1
          description: >
            factor * φ = δ. This parameter will be multiplied with phi to get
            the delta parameter used in negative friction calculation according
            to NEN-9997-1 7.3.2.2 (e). Typically values are 1.0 for piles cast
            in place, and 0.75 for other pile types. 

            **unit: `-`**
        settlement_curve:
          type: integer
          example: 1
          description: |
            Settlement lines for figures 7.n and 7.o of NEN-9997-1
            As defined in table 7.c of NEN-9997-1.

            **unit: `-`**
        adhesion:
          type: number
          nullable: true
          example: 50
          description: >
            Optional adhesion value, use it if the pile shaft has undergone a
            special treatment. See 7.3.2.2(d) of NEN 9997-1.

            **unit: kPa**
        installation_method:
          type: string
          enum:
            - "driven"
            - "screwed"
            - "excavated"
            - "vibrated"
            - "pressed"
            - "jetted"
          description: >
            Installation method of the pile. The following installation methods are
            interpreted as non-vibrating methods: "excavated", "pressed", "jetted",
            "screwed".
        is_prefab:
          type: boolean
          description: >
            Determines whether the pile is a prefab pile or not.
        is_open_ended:
          type: boolean
          description: >
            Determines whether the pile is open-ended or not.
        qc_z_a_lesser_1m:
          type: number
          minimum: 0
          description: >
            Maximum cone resistance `qc` value allowed for layers with 
            thickness < 1m in the calculation of positive skin friction
            resistance. This value is used to compute the trimmed (chamfered) 
            `qc;z;a` values according to NEN 9997-1+C2:2017 7.6.2.3.(10)(i). </br></br>

            **unit: `MPa`**
        qc_z_a_greater_1m:
          type: number
          minimum: 0
          description: >
            Maximum cone resistance `qc` value allowed for layers with 
            thickness >= 1m in the calculation of positive skin friction
            resistance. This value is used to compute the trimmed (chamfered) 
            `qc;z;a` values according to NEN 9997-1+C2:2017 7.6.2.3.(10)(i). </br></br>

            **unit: `MPa`**
        qb_max_limit:
          type: number
          minimum: 0
          description: >
            Maximum value allowed for the pile tip resistance `qb_max`
            obtained according to NEN 9997-1+C2:2017 7.6.2.3.(10)(e). </br></br>

            Note that is value is used as a limit for `qb_max` unless
            `use_almere_rules` is `true` and a higher value than 12 MPa is 
            specified. </br></br>

            **unit: `MPa`**
      required:
        - alpha_p
        - alpha_s_sand
        - alpha_s_clay
        - alpha_t_sand
        - alpha_t_clay
        - is_auger
        - is_low_vibrating
        - negative_fr_delta_factor
        - settlement_curve
        - adhesion
        - installation_method
        - is_prefab
        - is_open_ended
        - qc_z_a_lesser_1m
        - qc_z_a_greater_1m
        - qb_max_limit
      example:
        alpha_p: 0.01
        alpha_s_sand: 0.01
        alpha_s_clay:
          use_constant_value: true
          constant_value: 0.01
        alpha_t_sand: 0.01
        alpha_t_clay:
          use_constant_value: true
          constant_value: 0.01
        is_auger: false
        is_low_vibrating: true
        negative_fr_delta_factor: 1
        settlement_curve: 1
        adhesion: null
        installation_method: screwed
        is_prefab: true
        is_open_ended: false
        qc_z_a_lesser_1m: 12.0
        qc_z_a_greater_1m: 15.0
        qb_max_limit: 15.0
    soil_arguments_multi_cpt:
      type: object
      properties:
        friction_settings:
          allOf:
            - type: object
              description: >
                Sleeve friction settings for the single CPT. These settings
                will overwrite the 'general' values.
            - $ref: "#/components/schemas/friction_settings"
        groundwater_level_nap:
          type: number
          description: |
            The ground water level, with respect to NAP.

            **unit: `m NAP`**
        unique_id:
          type: string
          description: Optional unique identifier for the CPT. Will be returned.
    shared_input_groups_cpt_objects:
      type: object
      properties:
        cpt_objects:
          type: array
          minItems: 2
          example:
            - name: CPT101
              coordinates:
                x: 142892.19
                "y": 470783.87
              shaft_bearing_capacity:
                - 90
                - 180
                - 270
              bottom_bearing_capacity:
                - 10
                - 20
                - 30
              negative_friction:
                - 10
                - 10
                - 10
            - name: CPT102
              coordinates:
                x: 142892.19
                "y": 470783.87
              shaft_bearing_capacity:
                - 90
                - 180
                - 270
              bottom_bearing_capacity:
                - 10
                - 20
                - 30
              negative_friction:
                - 10
                - 10
                - 10
          items:
            type: object
            description: >-
              Each CPT object in the array contains the name, location, bearing
              capacity and negative friction for every cpt. Note that the depth
              values of the bearing capacity and negative friction must be given
              in an other property. This to ensure that all cpt_object are at
              the same depth and have valid values (not null).
            properties:
              name:
                type: string
                example: CPT101
                description: Name of the CPT
              coordinates:
                $ref: "#/components/schemas/coordinates"
              shaft_bearing_capacity:
                type: array
                items:
                  type: number
                  description: >-
                    Calculated shaft bearing capacity values at the shaft of the
                    pile [kN].
                example:
                  - 90
                  - 180
                  - 270
                minimum: 0
              bottom_bearing_capacity:
                type: array
                items:
                  type: number
                  description: >-
                    Calculated Bearing capacity values at the bottom (tip) of
                    the pile [kN].
                example:
                  - 10
                  - 20
                  - 30
                minimum: 0
              negative_friction:
                type: array
                items:
                  type: number
                  description: Design negative friction values of the pile [kN].
                example:
                  - 10
                  - 10
                  - 10
                minimum: 0
            required:
              - name
              - coordinates
              - shaft_bearing_capacity
              - bottom_bearing_capacity
              - negative_friction
        pile_tip_level:
          type: array
          items:
            type: number
            description: Depth of the bearing capacity values [m w.r.t. NAP]
          example:
            - 0
            - -1
            - -2
        cluster_level:
          type: number
          description: >-
            If a value is provided the clustering is done at that depth. [m
            w.r.t. NAP]
          example: -2
      required:
        - cpt_objects
        - pile_tip_level
    shared_input_groups_meta_data:
      type: object
      properties:
        gamma_shaft:
          type: number
          minimum: 0
          default: 1.2
          description: Safety factor design shaft bearing capacity [-]
        gamma_bottom:
          type: number
          minimum: 0
          default: 1.2
          description: Safety factor design bottom bearing capacity [-]
        stiff_construction:
          type: boolean
          default: true
          description: >-
            Attribute used to get the xi3 and xi4 value. True if it is a stiff
            construction
        cpt_grid_rotation:
          type: number
          default: 0
          description: >-
            Rotation of the squares used in the centre to centre validation
            [degrees].
        building_polygon:
          $ref: "#/components/schemas/Polygon"
        include_centre_to_centre_check:
          default: false
          type: boolean
          description: >-
            Flag that indicates if the cluster algorithm performs a centre to
            centre validation of the CPT’s of the generated subgroups or not
            according to NEN9997-1 3.2.3. If the group doesn’t comply to the
            check, the result of the group is deleted from the result.
    input_groups_cpts_filter:
      type: object
      properties:
        spatial_factor:
          type: array
          items:
            type: number
          uniqueItems: true
          default:
            - 0.5
            - 0.7
            - 0.9
            - 1.1
          minimum: 0
          description: >-
            The factor to changes the scaling of the spatial component of the
            training-set (consists of coordinates).
        resolution:
          type: number
          minimum: 0
          maximum: 1
          default: 1
          exclusiveMinimum: true
          description: >-
            The resolution of clusters algorithm. A lower resolution will lead to
            shorter computation time, but it's less likely to find an optimal result.
            The value must be between 0 and 1 (0 < resolution ≤ 1).
    output_grouper:
      type: object
      properties:
        sub_groups:
          type: array
          minItems: 1
          items:
            type: object
            properties:
              names:
                type: array
                uniqueItems: true
                items:
                  type: string
                example:
                  - CPT101
                  - CPT102
                minItems: 1
                description: List of CTP names in subgroup
              variation_check:
                type: boolean
                example: true
                description: >-
                  Bool that validates if variation coefficients is equal or
                  below 12 %
              spatial_check:
                type: boolean
                example: true
                description: Bool that validates if spatial distribution is correct
              centre_to_centre_check:
                type: boolean
                example: true
                description: Bool that validates if CTC is correct.
              pile_load_check:
                type: boolean
                example: true
                description: >-
                  Bool that validates if depth variation coefficients is equal
                  or below 12% and net bearing capacity larger than pile load
                  uls
              minimum_pile_level:
                type: number
                example: 0
                description: The minimum pile level of the valid subgroup [m w.r.t NAP]
              maximum_pile_level:
                type: number
                example: -2
                description: The maximum pile level of the valid subgroup [m w.r.t NAP]
              number_of_consecutive_pile_levels:
                type: number
                example: 3
                description: The maximum number of valid consecutive pile levels
              coordinates:
                type: array
                minItems: 1
                items:
                  type: array
                  items:
                    type: number
                  minItems: 2
                  maxItems: 2
                example:
                  - - 1
                    - 0
                  - - 2
                    - 3
                description: List of coordinates related to the cpt's
              table:
                type: object
                properties:
                  variation_coefficient:
                    type: array
                    minItems: 1
                    items:
                      type: number
                    example:
                      - 0
                      - 0
                      - 0
                    description: Variation coefficient of the subgroup [-]
                  net_design_bearing_capacity:
                    type: array
                    minItems: 1
                    items:
                      type: number
                    example:
                      - 60
                      - 60
                      - 60
                    description: Netto Design Bearing Capacity of the subgroup [kN]
                  xi_values:
                    type: array
                    minItems: 1
                    items:
                      type: number
                    example:
                      - 1.2
                      - 1.2
                      - 1.2
                    description: >-
                      List of xi value used in the design bearing capacity
                      calculation [-]
                  pile_tip_level:
                    type: array
                    minItems: 1
                    items:
                      type: number
                      description: Depth of the bearing capacity values [m w.r.t. NAP]
                    example:
                      - 0
                      - -1
                      - -2
                  mean_calculated_bearing_capacity:
                    type: array
                    minItems: 1
                    items:
                      type: number
                      description: Mean calculated  Bearing Capacity of the subgroup [kN]
                    example:
                      - 100
                      - 100
                      - 100
                  min_calculated_bearing_capacity:
                    type: array
                    minItems: 1
                    items:
                      type: number
                      description: >-
                        Minimum calculated  Bearing Capacity of the subgroup
                        [kN]
                    example:
                      - 100
                      - 100
                      - 100
                  xi_factor:
                    type: array
                    minItems: 1
                    items:
                      type: string
                      description: Indicator of the xi methode used.
                      pattern: ^ξ\d$
                    example:
                      - ξ3
                      - ξ3
                      - ξ4
                  nominal_cpt:
                    type: array
                    minItems: 1
                    items:
                      type: string
                      description: Name of the nominal CPT
                    example:
                      - CPT101
                      - CPT101
                      - CPT102
                  characteristic_bearing_capacity:
                    type: array
                    minItems: 1
                    items:
                      type: number
                      description: Characteristic Bearing Capacity of the subgroup [kN]
                    example:
                      - 83
                      - 83
                      - 83
                  design_negative_friction:
                    type: array
                    minItems: 1
                    items:
                      type: number
                      description: Design Negative Friction of the subgroup [kN]
                    example:
                      - 70
                      - 70
                      - 70
                  design_bearing_capacity:
                    type: array
                    minItems: 1
                    items:
                      type: number
                      description: Design Bearing Capacity of the subgroup [kN]
                    example:
                      - 70
                      - 70
                      - 70
                  group_centre_to_centre_validation_15:
                    type: array
                    minItems: 1
                    items:
                      type: boolean
                      description: >-
                        A maximum CTC distance of 15 m, if no R;c;cal outliers
                        greater than 30% off the average.
                    example:
                      - true
                      - true
                      - true
                  group_centre_to_centre_validation_20:
                    type: array
                    minItems: 1
                    items:
                      type: boolean
                      description: >-
                        A maximum CTC distance of 20 m, if no R;c;cal outliers
                        greater than 30% off the average.
                    example:
                      - true
                      - true
                      - true
                  group_centre_to_centre_validation_25:
                    type: array
                    minItems: 1
                    items:
                      type: boolean
                      description: >-
                        A maximum CTC distance of 25 m, if no R;c;cal outliers
                        greater than 30% off the average.
                    example:
                      - true
                      - true
                      - true
                  group_centre_to_centre_validation:
                    type: array
                    minItems: 1
                    items:
                      type: boolean
                      description: Any valid CTC distance for pile-tip level.
                    example:
                      - true
                      - true
                      - true
                required:
                  - design_bearing_capacity
                  - design_negative_friction
                  - characteristic_bearing_capacity
                  - nominal_cpt
                  - xi_factor
                  - min_calculated_bearing_capacity
                  - mean_calculated_bearing_capacity
                  - pile_tip_level
                  - xi_values
                  - net_design_bearing_capacity
                  - variation_coefficient
                  - group_centre_to_centre_validation_15
                  - group_centre_to_centre_validation_20
                  - group_centre_to_centre_validation_25
                  - group_centre_to_centre_validation
            required:
              - names
              - variation_check
              - spatial_check
              - pile_load_check
              - number_of_consecutive_pile_levels
              - coordinates
              - table
              - centre_to_centre_check
    input_group_metrics:
      allOf:
        - $ref: "#/components/schemas/shared_input_groups_cpt_objects"
        - $ref: "#/components/schemas/shared_input_groups_meta_data"
        - type: object
          properties:
            sub_groups:
              type: array
              minItems: 1
              items:
                type: object
                properties:
                  names:
                    type: array
                    minItems: 1
                    uniqueItems: true
                    items:
                      type: string
                    example:
                      - CPT101
                    description: List of CTP names in subgroup
          required:
            - sub_groups
    soil_properties:
      type: object
      required:
        - cpt_data
        - layer_table_data
        - ref_height
        - test_id
      properties:
        cpt_data:
          $ref: "#/components/schemas/cpt_data"
        layer_table_data:
          $ref: "#/components/schemas/layer_table_input"
        ref_height:
          type: number
          description: |
            The surface height, with respect to the vertical reference.

            **unit: `m`**
        test_id:
          type: string
          description: |
            The name of soil test
          example: CPT101
        water_pressure:
          default: 0.00981
          type: number
          description: |
            Water's unit weight.

            **unit: `MPa`**
        coordinates:
          $ref: "#/components/schemas/coordinates"
        ocr:
          type: number
          default: 1
          description: >
            Over-consolidation ratio.

            If provided has effect on the calculation of the negative skin
            friction via the parameter K_0.


            **unit: `-`**
    soil_properties_list:
      type: array
      minItems: 1
      items:
        $ref: "#/components/schemas/soil_properties"
    layer_table_input:
      allOf:
        - $ref: "#/components/schemas/layer_table_data"
        - $ref: "#/components/schemas/d50_input_col"
    layer_table_output:
      allOf:
        - $ref: "#/components/schemas/layer_table_data"
        - $ref: "#/components/schemas/d50_output_col"
    layer_table_data:
      type: object
      description: The classification of the cpt file.
      required:
        - lower_boundary
        - main_component
        - phi
        - gamma_unsat
        - gamma_sat
        - thickness
      properties:
        thickness:
          description: The layer thickness [m]
          items:
            example: 10
            exclusiveMinimum: true
            minimum: 0
            type: number
          minItems: 1
          maxItems: 100
          type: array
        lower_boundary:
          description: |
            The depth of the layer bottom (below service level). - **unit: `m`**
          items:
            example: 10
            type: number
            minimum: 0
          minItems: 1
          maxItems: 100
          type: array
          uniqueItems: true
        C_s:
          description: Koppejan parameters for secondary compression.
          items:
            example: 600
            exclusiveMinimum: true
            minimum: 0
            type: number
            nullable: true
          minItems: 1
          maxItems: 100
          type: array
        C_p:
          description: Koppejan parameters for primary compression.
          items:
            example: 650
            exclusiveMinimum: true
            minimum: 0
            type: number
            nullable: true
          minItems: 1
          maxItems: 100
          type: array
        tau_mob_max:
          description: >-
            The average mobilized shear stress around the uplift-loaded used
            in  failure tests on anchor piles accourding to CUR236 [kN/m2].
          items:
            example: 50
            exclusiveMinimum: true
            minimum: 0
            type: number
            nullable: true
          minItems: 1
          maxItems: 100
          type: array
        qc_gem_failure_test:
          description: >-
            The average cone resistance  used in  failure tests on anchor piles
            accourding to CUR236 [MPa].
          items:
            example: 10
            exclusiveMinimum: true
            minimum: 0
            type: number
            nullable: true
          minItems: 1
          maxItems: 100
          type: array
        gamma_unsat:
          description: The dry unit weights [MPa].
          items:
            example: 19
            minimum: 0
            type: number
          minItems: 1
          maxItems: 100
          type: array
        gamma_sat:
          description: The saturated unit weights [MPa].
          items:
            example: 21
            minimum: 0
            type: number
          minItems: 1
          maxItems: 100
          type: array
        phi:
          description: |
            Internal friction angle.  - **unit: `radians`**
          items:
            example: 0.4799655443
            minimum: 0
            type: number
          minItems: 1
          maxItems: 100
          type: array
        main_component:
          description: Main soil component
          items:
            type: string
            example: sand
            enum:
              - gravel
              - sand
              - silt
              - clay
              - peat
          minItems: 1
          maxItems: 100
          type: array
    d50_input_col:
      type: object
      properties:
        D_50:
          description: |
            The median grain size. - **unit: `mm`**
            Defaults to 2.0 mm for gravel and 0.2 mm for other soil types.
          type: array
          items:
            example: 0.2
            exclusiveMinimum: true
            minimum: 0
            nullable: true
            type: number
          minItems: 1
          maxItems: 100
    d50_output_col:
      type: object
      required:
        - D_50
      properties:
        D_50:
          description: |
            The median grain size. - **unit: `mm`**
          type: array
          items:
            example: 0.2
            exclusiveMinimum: true
            minimum: 0
            type: number
          minItems: 1
    cpt_data:
      type: object
      description: Object that holds the cpt information.
      properties:
        qc:
          type: array
          minItems: 1
          example:
            - 1
            - 1
            - 1
            - 1
            - 1
            - 1
            - 1
            - 1
            - 1
            - 1
          description: |
            The cone resistance of the cpt. - **unit: `MPa`**
          items:
            type: number
            minimum: 0
        depth:
          type: array
          minItems: 1
          example:
            - 0
            - 1
            - 2
            - 3
            - 4
            - 5
            - 6
            - 7
            - 8
            - 9
          description: >-
            The depth of the recorded data (below service level). - **unit:
            `m`**
          items:
            type: number
            minimum: 0
          uniqueItems: true
        u:
          type: array
          minItems: 1
          description: >
            water pressure [MPa]. Can be used to calculate the groundwater
            level.


            PileCore does NOT use the in-situ measured water pressures directly

            as pore-pressures for the calculation of effective grain pressures.

            Hydrostatic pore pressures are inferred instead, taking the

            groundwater level into account. The in-situ water pressures can be

            used to estimate the groundwater level by detecting the point where

            the water pressures are zero. 


            When the user provides a value for the `groundwater_level_nap`
            property, the

            in-situ water pressures are always ignored.


            - **unit: `MPa`**
          items:
            type: number
          example:
            - 0
            - 0
            - 1
            - 2
            - 3
            - 4
            - 5
            - 6
            - 7
            - 8
      required:
        - qc
        - depth
    coordinates:
      type: object
      properties:
        x:
          type: number
          example: 142892.19
          description: Set x coordinate for a cartesian metric coordinate system.
        "y":
          type: number
          example: 470783.87
          description: Set y coordinate for a cartesian metric coordinate system.
      required:
        - x
        - "y"
    automatic_friction_range_strategy:
      type: string
      enum:
        - lower_bound
        - settlement_driven
      default: lower_bound
      description: >
        Sets the method to determine the sleeve friction zones on the pile. The
        soil friction in the positive zone contributes to the bearing capacity, while
        the negative zone adds an extra load on the pile.

        ## *lower_bound*

        If "lower_bound" is entered (default), the depth ranges for which the
        negative/positive sleeve friction has to be taken into account are determined
        automatically, with a robust method that considers the soil stratigraphy.

        It is assumed that the negative friction zone tops at surface-level, and
        the positive friction zone bottoms at pile-tip level, with a tipping-point
        somewhere along the pile where the two zones meet. The Lower-bound method sets
        this tipping-point to the bottom of the deepest soft-soil layer (e.g. peat,
        clay, silt) that is above the considered pile-tip level.

        ## *settlement_driven*

        If "settlement_driven" is entered, the depth ranges for which the 
        negative/positive sleeve friction has to be taken into account are determined
        automatically, using an iterative calculation that considers relative
        settlements of the pile and the soil. It is assumed that the negative friction
        zone tops at surface-level, and the positive friction zone bottoms at pile-tip
        level, with a tipping point somewhere along the pile where the two zones meet. The
        SettlementDriven method defines the tipping point as the lowest point on the
        pile where the pile-settlement is higher than the soil-settlement.
    manual_friction_range_strategy:
      type: string
      enum:
        - manual
      description: >
        Sets the method to determine the sleeve friction zones on the pile. The
        soil friction in the positive zone contributes to the bearing capacity, while
        the negative zone adds an extra load on the pile.

        Accepted values: "manual", "lower_bound" or "settlement_driven".

        ## *manual*

        If "manual" is entered, the user is required to provide the friction ranges
        manually.
    excavation_settings_constant_method:
      type: object
      properties:
        stress_reduction_method:
          type: string
          enum:
            - constant
          description: >
            Method used to calculate the stress reduction due to the
            excavation applied to the effective and total stresses. Only used
            when a value for `excavation_depth_nap` is provided.</br></br>

            The stress reduction below the excavation is constant with depth. The stress reduction is equal to the
            original effective stress (i.e. before the excavation) at the excavation depth.</br></br>

            The stress reduction applied above the excavation is equal to the original effective stress at each
            corresponding depth.
      required:
        - stress_reduction_method
    excavation_settings_begemann_method:
      type: object
      properties:
        stress_reduction_method:
          type: string
          enum:
            - begemann
          description: >
            Method used to calculate the stress reduction due to the
            excavation applied to the effective and total stresses. Only used
            when a value for `excavation_depth_nap` is provided.</br></br>

            The stress reduction below the excavation decreases with depth according to the Begemann
            method. This method uses the elastic solution of a strip load acting on a semi-infinite homogeneous soil mass.
            The load has a width equal to the excavation width and a magnitude equal to the original effective stress
            at the excavation depth.</br></br>

            The stress reduction applied above
            the excavation is equal to the original effective stress at each
            corresponding depth.
        excavation_width:
          type: number
          minimum: 0
          exclusiveMinimum: true
          description: >
            Width of the excavation. Used to calculate the stress reduction
            due to the excavation if the Begemann method is selected. In this
            case, it must be provided and it must be > 0.</br></br>

            **unit: `m`**
        excavation_edge_distance:
          type: number
          minimum: 0
          description: >
            Distance from the pile centerline to the excavation edge. Used to
            calculate the stress reduction due to the excavation if the
            Begemann method is selected. In this case, it must be provided and
            it must be between `0.0` and  `0.5 * excavation_width`.</br></br>

            Note that: 
              - `0.0` means that the pile is located at the edge of the excavation.
              - `0.5 * excavation_width` means that the pile is at the center of the excavation.

            **unit: `m`**
      required:
        - stress_reduction_method
        - excavation_width
        - excavation_edge_distance
    report_metadata:
      type: object
      properties:
        project_name:
          type: string
          description: Name of the project
          example: Project Amsterdam
          minLength: 0
          maxLength: 100
        project_number:
          type: string
          description: Number of the project
          example: 123456AB
          minLength: 0
          maxLength: 100
        project_remark:
          type: string
          description: Remark of the project
          example: This is a test project
          minLength: 0
          maxLength: 100
        author:
          type: string
          description: Author of the project
          example: N. Uclei
          minLength: 0
          maxLength: 100
      required:
        - project_name
        - project_number
        - author
    calculation_params_multi:
      type: object
      properties:
        gamma_r_s:
          type: number
          description: >
            Safety factor γ_r_s. Used for determining design values of the
            gamma_shaft:  bearing capacity.
          example: 1.2
        gamma_r_b:
          type: number
          description: >
            Safety factor γ_r_b. Used for determining design values of the
            bottom  bearing capacity.
          example: 1.2
        gamma_f_nk:
          type: number
          description: >
            Safety factor γ_f_nk. Used for determining design values of the
            negative  friction force.
          example: 1
        soil_load:
          type: number
          description: >
            (Fictive) load on soil used to calculate soil settlement. This is
            required and used to determine settlement of pile w.r.t. soil.


            **unit: `kPa`**
          example: 25
        pile_load:
          type: number
          description: >
            Force on pile in SLS. Used to determine settlement of pile w.r.t.
            soil.

            **unit: `kN`**
          example: 1000
        rel_pile_load:
          type: number
          minimum: 0
          maximum: 1
          example: 0.7
          description: >
            The fraction of the maximum bearing capacity that is used as pile
            head force in the settlement calculations. The input value can range
            between 0.0 and 1.0, where 1.0 translates to a pile load of 100% of
            the maximum bearing capacity.
        excavation_settings:
          oneOf:
            - $ref: "#/components/schemas/excavation_settings_constant_method"
            - $ref: "#/components/schemas/excavation_settings_begemann_method"
          description: >
            Settings for the calculation of the stress reduction due to the
            excavation applied to the effective and total stresses.</br>

            The stress reduction method can be either `constant` or `begemann`. 
            Note that each method has its specific settings.</br>
          example:
            stress_reduction_method: constant
      required:
        - gamma_r_s
        - gamma_r_b
        - gamma_f_nk
        - soil_load
        - excavation_settings
    annotations:
      description: >
        A dictionary with single-value annotations. Based on the Bearing 
        calculation of the lowest pile-tip-level.
      type: object
      properties:
        pile_tip_levels_nap:
          type: array
          description: An array of pile-tip-level depths [m] w.r.t. NAP.
          items:
            type: number
        d4_index:
          type: integer
          description: >
            The index in the cpt_chart[‘depth_nap’] column, of the depth-level 4
            * pile-diameter below the pile-tip-level. This depth is used in the
            Koppejan method as the lowest possible value for the qc1 and qc2
            trajectories.
        pile_head_level_nap:
          description: Depth of the pile-head in [m] w.r.t. NAP.
          type: number
      required:
        - pile_tip_levels_nap
        - pile_head_level_nap
    cpt_chart:
      type: object
      description: >
        Object with original and derived CPT data from the Bearing calculation
        of the lowest pile-tip-level.
      properties:
        depth_nap:
          type: array
          description: The depth [m] w.r.t. NAP
          items:
            type: number
        qc:
          type: array
          description: >
            The cone resistance signal from the CPT [MPa], possibly corrected
            for excavation or OCR.
          items:
            type: number
        qc_original:
          type: array
          description: The original cone resistance signal from the CPT [MPa].
          items:
            type: number
        qc_chamfered:
          type: array
          description: |
            The chamfered-qc signal, used for the positive friction range [MPa].
          items:
            type: number
        fs:
          type: array
          description: The original fs signal from the CPT [MPa].
          items:
            type: number
            nullable: true
        qc1:
          type: array
          description: The Koppejan-qc1 trajectory [MPa].
          items:
            type: number
            nullable: true
        qc2:
          type: array
          description: The Koppejan-qc2 trajectory [MPa]
          items:
            type: number
            nullable: true
      required:
        - depth_nap
        - qc
        - qc_original
        - qc_chamfered
        - qc1
        - qc2
    results_table:
      description: |
        Bearing calculation results for each pile-tip-level.
      type: object
      properties:
        pile_tip_level_nap:
          type: array
          description: The pile-tip level in m w.r.t. NAP.
          items:
            type: number
        F_nk_cal:
          type: array
          description: The calculated negative friction force [kN].
          items:
            type: number
        F_nk_k:
          type: array
          description: The characteristic negative friction force [kN].
          items:
            type: number
        F_nk_d:
          type: array
          description: The design negative friction force [kN].
          items:
            type: number
        R_b_cal:
          type: array
          description: The calculated bottom bearingcapacity [kN].
          items:
            type: number
        R_b_k:
          type: array
          description: The characteristic bottom bearingcapacity [kN].
          items:
            type: number
        R_b_d:
          type: array
          description: The design bottom bearingcapacity [kN].
          items:
            type: number
        R_s_cal:
          type: array
          description: The calculated shaft bearingcapacity [kN].
          items:
            type: number
        R_s_k:
          type: array
          description: The characteristic shaft bearingcapacity [kN].
          items:
            type: number
        R_s_d:
          type: array
          description: The design shaft bearingcapacity [kN].
          items:
            type: number
        R_c_cal:
          type: array
          description: The total calculated bearingcapacity [kN].
          items:
            type: number
        R_c_k:
          type: array
          description: The total characteristic bearingcapacity [kN].
          items:
            type: number
        R_c_d:
          type: array
          description: The total design bearingcapacity [kN].
          items:
            type: number
        R_c_d_net:
          type: array
          description: The total net design bearingcapacity [kN].
          items:
            type: number
        F_c_k:
          type: array
          description: The exerted downward force on the pile-head [kN].
          items:
            type: number
        F_c_k_tot:
          type: array
          description: The total exerted downward force on the pile [kN].
          items:
            type: number
        negative_friction_range_nap_top:
          type: array
          description: The top of the negative friction zone, in [m] w.r.t. NAP.
          items:
            type: number
            nullable: true
        negative_friction_range_nap_btm:
          type: array
          description: |
            The bottom of the negative friction zone, in [m] w.r.t. NAP.
          items:
            type: number
            nullable: true
        positive_friction_range_nap_top:
          type: array
          description: The top of the positive friction zone, in [m] w.r.t. NAP.
          items:
            type: number
        positive_friction_range_nap_btm:
          type: array
          description: |
            The bottom of the positive friction zone, in [m] w.r.t. NAP.
          items:
            type: number
        pile_tip_factor_s:
          type: array
          description: >
            Factor s [-] used in pile tip resistance calculation as per NEN
            9997-1 7.6.2.3 (h).
          items:
            type: number
        q_b_max:
          type: array
          description: The maximum bottom bearing resistance [MPa].
          items:
            type: number
        q_s_max_mean:
          type: array
          description: The maximum shaft bearing resistance [MPa].
          items:
            type: number
            nullable: true
        qc1:
          type: array
          description: |
            The average friction resistance in Koppejan trajectory I [MPa] .
          items:
            type: number
        qc2:
          type: array
          description: |
            The average friction resistance in Koppejan trajectory II [MPa] .
          items:
            type: number
        qc3:
          type: array
          description: |
            The average friction resistance in Koppejan trajectory III [MPa] .
          items:
            type: number
        s_b:
          type: array
          description: The settlement of the pile bottom [mm].
          items:
            type: number
        s_el:
          type: array
          description: |
            The elastic shortening of the pile due to elastic strain [mm].
          items:
            type: number
        k_v_b:
          type: array
          description: |
            The 1-dimensional stiffness modulus at pile bottom [kN/m].
          items:
            type: number
        k_v_1:
          type: array
          description: |
            The 1-dimensional stiffness modulus at pile head [MN/mm].
          items:
            type: number
      required:
        - pile_tip_level_nap
        - F_nk_cal
        - F_nk_k
        - F_nk_d
        - R_b_cal
        - R_b_k
        - R_b_d
        - R_s_cal
        - R_s_k
        - R_s_d
        - R_c_cal
        - R_c_k
        - R_c_d
        - R_c_d_net
        - F_c_k
        - F_c_k_tot
        - negative_friction_range_nap_top
        - negative_friction_range_nap_btm
        - positive_friction_range_nap_top
        - positive_friction_range_nap_btm
        - pile_tip_factor_s
        - q_b_max
        - q_s_max_mean
        - qc1
        - qc2
        - qc3
        - s_b
        - s_el
        - k_v_b
        - k_v_1
    negative_friction_table:
      type: object
      description: >
        Contains a table with negative friction results per soil-layer for a
        certain pile-tip level.
      properties:
        friction_table:
          type: object
          description: >
            The table with negative friction results per soil layer. The index 
            corresponds to the 'layer_table' index.
          properties:
            index:
              type: array
              description: The layer index
              example:
                - 0
                - 1
              uniqueItems: true
              items:
                type: number
                minimum: 0
            circum:
              type: array
              description: The average pile circumference [m] per layer.
              example:
                - 1
                - 1
              items:
                type: number
                minimum: 0
            grain_pressure_avg:
              type: array
              description: The average effective grain pressure [MPa] per layer.
              example:
                - 0.1
                - 0.2
              items:
                type: number
                minimum: 0
            delta_k:
              type: array
              description: >-
                The characteristic friction angle [rad] of the pile-soil
                interface.
              example:
                - 0.1
                - 0.2
              items:
                type: number
                minimum: 0
            k_0:
              type: array
              description: Characteristic horizontal soil stress factor K_0;k [-].
              example:
                - 0.5
                - 0.5
              items:
                type: number
                minimum: 0
            F_nk_d:
              type: array
              description: Design value of the negative friction force [kN]
              example:
                - 1
                - 2
              items:
                type: number
                minimum: 0
          required:
            - index
            - circum
            - grain_pressure_avg
            - delta_k
            - k_0
            - F_nk_d
        pile_tip_level_nap:
          type: number
          description: >
            The pile-tip level for which the friction table results were
            calculated.
      required:
        - friction_table
        - pile_tip_level_nap
    input_multi_cpt_report:
      allOf:
        - $ref: "#/components/schemas/bearing_calculation_multi_cpts_input"
        - type: object
          required:
            - general
            - pile_tip_levels_nap
          properties:
            pile_tip_levels_nap:
              type: array
              uniqueItems: true
              items:
                type: number
              minItems: 2
              description: |
                Range of values for which the pile resistance is calculated.

                **unit: `m NAP`**
            content:
              type: object
              properties:
                result_summary:
                  type: boolean
                  default: true
                individual_cpt_results:
                  type: boolean
                  default: true
                group_results:
                  type: boolean
                  default: true
            general:
              $ref: "#/components/schemas/report_general"
    report_general:
      type: object
      properties:
        project_name:
          type: string
          description: Name of the project.
          example: Test project
        project_id:
          type: string
          description: Id of the project.
          example: "123456"
        author:
          type: string
          description: Author of the report.
          example: J.A. Frusciante
        date:
          type: string
          description: |
            Report date. Defaults to current date in `"%d-%m-%y"` format.
          example: 01-01-2001
      required:
        - project_name
        - project_id
        - author
    group_results:
      description: |
        Results for the group of cpts as a whole.
      type: object
      required:
        - pile_tip_level_nap
        - R_s_k
        - R_b_k
        - R_c_k
        - R_s_d
        - R_b_d
        - R_c_d
        - F_nk_cal_mean
        - F_nk_k
        - F_nk_d
        - R_c_d_net
        - F_c_k
        - F_c_k_tot
        - s_b
        - s_e
        - s_e_mean
        - R_b_mob_ratio
        - R_s_mob_ratio
        - k_v_b
        - k_v_1
        - R_c_min
        - R_c_max
        - R_c_mean
        - R_c_std
        - R_s_mean
        - R_b_mean
        - var_coef
        - n_cpts
        - use_group_average
        - xi_normative
        - xi_value
        - cpt_Rc_min
        - cpt_Rc_max
        - cpt_normative
      properties:
        pile_tip_level_nap:
          description: The pile-tip level [m] w.r.t. NAP.
          type: array
          uniqueItems: true
          items:
            type: number
        R_s_k:
          description: |
            The characteristic value of the shaft bearingcapacity  [kN].
          type: array
          items:
            type: number
        R_b_k:
          description: |
            The characteristic value of the bottom bearingcapacity  [kN].
          type: array
          items:
            type: number
        R_c_k:
          description: >
            The characteristic value of the total compressive bearingcapacity 
            [kN].
          type: array
          items:
            type: number
        R_s_d:
          description: |
            The design value of the shaft bearingcapacity  [kN].
          type: array
          items:
            type: number
        R_b_d:
          description: |
            The design value of the bottom bearingcapacity  [kN].
          type: array
          items:
            type: number
        R_c_d:
          description: The design value of the total bearingcapacity [kN].
          type: array
          items:
            type: number
        F_nk_cal_mean:
          description: >-
            The mean value of the calculated single-CPT negative friction forces
            [kN].
          type: array
          items:
            type: number
        F_nk_k:
          description: The charactertistic value of the negative friction force [kN].
          type: array
          items:
            type: number
        F_nk_d:
          description: The design value of the negative friction force [kN].
          type: array
          items:
            type: number
        R_c_d_net:
          description: >
            The net design value of the total bearingcapacity [kN] (netto =
            excluding design negative friction force.).
          type: array
          items:
            type: number
        F_c_k:
          description: >
            The characteristic value of the load on the pile head (e.g. building
            load) [kN]
          type: array
          items:
            type: number
        F_c_k_tot:
          description: >
            The characteristic value of the total compressive pile load [kN]
            (building-load + neg. friction force).
          type: array
          items:
            type: number
        s_b:
          description: The settlement of the pile bottom [mm].
          type: array
          items:
            type: number
        s_e:
          description: The elastic shortening of the pile [mm].
          type: array
          items:
            type: number
        s_e_mean:
          description: >-
            The mean of single-CPT results for elastic shortening of the pile
            [mm].
          type: array
          items:
            type: number
        R_b_mob_ratio:
          description: The mobilisation ratio of the bottom bearing capacity [-].
          type: array
          items:
            type: number
        R_s_mob_ratio:
          description: The mobilisation ratio of the shaft bearing capacity [-].
          type: array
          items:
            type: number
        k_v_b:
          description: The 1-dimensional stiffness modulus at pile bottom [kN/m].
          type: array
          items:
            type: number
        k_v_1:
          description: The 1-dimensional stiffness modulus at pile head [MN/mm].
          type: array
          items:
            type: number
        R_c_min:
          description: >
            The minimum of the single-CPT values for the calculated
            bearingcapacity [kN].
          type: array
          items:
            type: number
        R_c_max:
          description: >
            The maximum of the single-CPT values for the calculated
            bearingcapacity [kN].
          type: array
          items:
            type: number
        R_c_mean:
          description: >
            The mean of the single-CPT values for the calculated bearingcapacity
            [kN].
          type: array
          items:
            type: number
        R_c_std:
          description: >
            The standard-deviation of the single-CPT values for the calculated
            bearingcapacity [kN].
          type: array
          items:
            type: number
        R_s_mean:
          description: >
            The mean of the single-CPT values for the calculated shaft
            bearingcapacity [kN].
          type: array
          items:
            type: number
        R_b_mean:
          description: >
            The mean of the single-CPT values for the calculated bottom
            bearingcapacity [kN].
          type: array
          items:
            type: number
        var_coef:
          description: >
            The variation coefficient [%] of the calculated bearing capacities 
            in the group.
          type: array
          items:
            type: number
        n_cpts:
          description: >
            The number of CPTs [-] that have been taken into account to 
            establish the Xi value.
          type: array
          items:
            type: number
        use_group_average:
          description: >-
            If true, the group average is used for the calculation of
            characteristic group results. If false, the values of the normative
            CPT are used.
          type: array
          items:
            type: boolean
        xi_normative:
          description: The normative Xi (either Xi_3 or Xi_4)
          type: array
          items:
            type: string
        xi_value:
          description: >
            The Xi value [-] that was applied to calculate the characteristic
            value of the total bearing capacity.
          type: array
          items:
            type: number
        cpt_Rc_min:
          description: |
            The CPT with the lowest value for R_c_cal.
          type: array
          items:
            type: string
        cpt_Rc_max:
          description: |
            The CPT with the highest value for R_c_cal.
          type: array
          items:
            type: string
        cpt_normative:
          description: >
            The normative CPT. Can be "group average" if that was found to be 
            the normative scenario.
          type: array
          items:
            type: string
    Point2D:
      items:
        description: X and Y coordinate for a cartesian metric coordinate system.
        type: number
      maxItems: 2
      minItems: 2
      type: array
    Polygon:
      description: GeoJSON geometry.
      externalDocs:
        url: http://geojson.org/geojson-spec.html#id4
      properties:
        coordinates:
          items:
            items:
              $ref: "#/components/schemas/Point2D"
            type: array
            minItems: 3
            uniqueItems: true
          type: array
          uniqueItems: true
        type:
          description: the geometry type
          enum:
            - Polygon
          type: string
      required:
        - type
        - coordinates
    MultiPolygon:
      description: GeoJSON geometry.
      externalDocs:
        url: http://geojson.org/geojson-spec.html#id7
      properties:
        coordinates:
          items:
            items:
              items:
                $ref: "#/components/schemas/Point2D"
              type: array
              minItems: 3
              uniqueItems: false
            type: array
            uniqueItems: false
          type: array
          uniqueItems: false
        type:
          description: the geometry type
          enum:
            - MultiPolygon
          type: string
      required:
        - type
        - coordinates
    share_uplift_output:
      type: object
      properties:
        gamma_s_t:
          type: number
          description: >
            Safety factor γ_s_t. Used to determine the tensile resistance of a
            pile.
          example: 1.2
        xi:
          type: number
          description: >
            Correlation factor xi_3 or xi_4 from NEN 9997-1+C2_2017 Table A.10a
            and A10b. Used to calculate the characteristic cone resistance
            values  qc;z;k as prescribed in NEN 9997-1+C2_2017 7.6.3.3(4 and d):
            qc;z;k = qc;z;a;cal / xi  -.

            **unit: `-`**
          example: 1.39
        gamma_gamma:
          description: |
            partial factor for volumetric weight NEN 9997-1+C2:2017 A.3.2
          type: number
        gamma_m_var_qc:
          description: >
            partial factor for the influence of load switching; NEN
            9997-1+C2:2017 7.6.3.3 (d)
          type: number
        soil_load:
          type: number
          description: >
            (Fictive) load on soil used to calculate soil settlement. This is
            required and used to determine settlement of pile w.r.t. soil.


            **unit: `kPa`**
        excavation_param_t:
          description: >
            Excavation parameter depending on pile installation method and/or
            phasing.
          type: number
        excavation_settings:
          oneOf:
            - $ref: "#/components/schemas/excavation_settings_constant_method"
            - $ref: "#/components/schemas/excavation_settings_begemann_method"
          description: >
            Settings for the calculation of the stress reduction due to the
            excavation applied to the effective and total stresses.</br>

            The stress reduction method can be either `constant` or `begemann`. 
            Note that each method has its required settings.</br>

            Defaults to the `constant` method.
          example:
            stress_reduction_method: constant
      required:
        - gamma_s_t
        - xi
        - gamma_gamma
        - gamma_m_var_qc
        - excavation_settings
        - soil_load
        - excavation_param_t
    cpt_chart_uplift:
      type: object
      description: >
        Object with original and derived CPT data from the tensile resistance
        calculation of the lowest pile-tip-level.
      properties:
        depth_nap:
          type: array
          uniqueItems: true
          description: The depth [m] w.r.t. NAP
          items:
            type: number
        qc:
          type: array
          description: >
            The cone resistance signal from the CPT [MPa], possibly corrected
            for excavation or OCR.
          items:
            type: number
        qc_original:
          type: array
          description: The original cone resistance signal from the CPT [MPa].
          items:
            type: number
        qc_chamfered:
          type: array
          description: |
            The chamfered-qc signal, used for the positive friction range [MPa].
          items:
            type: number
        qs_d:
          type: array
          description: |
            The computational value of shaft friction [kPa]
          items:
            type: number
        f1:
          type: array
          description: >-
            factor for the effect of compaction in the pile group (7.6.3.3 (e)
            NEN 9997-1+C2:2017) [-]
          items:
            type: number
        f2_d_mean:
          type: array
          description: >-
            factor for the decrease in grain stress in sand layers from which
            the pile derives its tensile resistance (7.6.3.3 (f) NEN
            9997-1+C2:2017) [-]
          items:
            type: number
        R_t_d_plug:
          type: array
          description: >-
            root ball weight, excluding the weight of the pile (7.6.3.3 (h) NEN
            9997-1+C2:2017) [kN]
          items:
            type: number
        phi_plug:
          type: array
          description: >-
            size of the top angle of the ground cone (7.6.3.1 (h) NEN 
            9997-1+C2:2017) [degrees]
          items:
            type: number
        R_t_d:
          type: array
          description: >-
            characteristic value of the tensile resistance of a pile or pile
            group (7.6.3.3 NEN 9997-1+C2:2017) [kN]
          items:
            type: number
        f3:
          type: array
          description: >-
            factor for the decrease in bearing capacity from the length—effect, 
            according to figure 6.1a en 6.1b (CROW-CUR Rapport 236   Richtlijn
            Ankerpalen [2023]) [-].
          items:
            type: number
        alpha_t:
          type: array
          description: >-
            Alpha t factor used in uplift resistance calculation [-]. based on
            table 7.d NEN 9997-1+C2:2017.
          items:
            type: number
        alpha_t_1:
          type: array
          description: >-
            Alpha t factor used in uplift resistance calculation [-]. tabel 6.2
            CROW-CUR Rapport 236 Richtlijn Ankerpalen [2023].
          items:
            type: number
        alpha_t_2:
          type: array
          description: >-
            Alpha t factor used in uplift resistance calculation [-]. tabel 6.2
            CROW-CUR Rapport 236 Richtlijn Ankerpalen [2023].
          items:
            type: number
      required:
        - depth_nap
        - qc
        - qc_original
        - qc_chamfered
        - qs_d
        - f1
        - f2_d_mean
        - R_t_d
        - phi_plug
        - R_t_d_plug
    table_uplift_output:
      description: |
        Bearing calculation results for each pile-tip-level.
      type: object
      properties:
        pile_tip_level_nap:
          type: array
          uniqueItems: true
          description: The pile-tip level in m w.r.t. NAP.
          items:
            type: number
        A:
          type: array
          description: >
            is the area of influence of the pile, that is, the area over which
            the stress spreads around a pile within a pile group. The value of A
            is limited to the plane covering half the center-to-center distance
            to the next foundation pile, see also figure **7.m NEN
            9997-1+C2:2017**.


            NOTE Further guidance on the determination of A is given in 7.3.4
            and 7.3.5 of CUR publication 2001-4 Design Rules for Uplift Piles.


            **unit: `m2`**
          items:
            type: number
        R_t_d_plug:
          type: array
          description: >-
            root ball weight, excluding the weight of the pile (7.6.3.3 (h) NEN
            9997-1+C2:2017) [kN]
          items:
            type: number
        R_t_d:
          type: array
          description: >-
            calculation value of the tensile resistance of a pile or pile group
            (7.6.3.3 (a) NEN 9997-1+C2:2017) [kN]
          items:
            type: number
            nullable: true
        R_t_k:
          type: array
          description: >-
            characteristic value of the tensile resistance of a pile or pile
            group (7.6.3.3 NEN 9997-1+C2:2017) [kN]
          items:
            type: number
            nullable: true
        R_s_mob_ratio:
          description: The mobilisation ratio of the shaft bearing capacity [-].
          type: array
          items:
            type: number
            nullable: true
        R_s_mob:
          description: The mobilisation of the shaft bearing capacity [kN].
          type: array
          items:
            type: number
            nullable: true
        k_v_b:
          description: The 1-dimensional stiffness modulus at pile bottom [kN/m].
          type: array
          items:
            type: number
            nullable: true
        k_v_1:
          description: The 1-dimensional stiffness modulus at pile head [MN/mm].
          type: array
          items:
            type: number
            nullable: true
        q_s_max_mean:
          type: array
          description: The maximum shaft bearing resistance [MPa].
          items:
            type: number
            nullable: true
        s_b:
          description: The settlement of the pile bottom [mm].
          type: array
          items:
            type: number
        s_e:
          description: The elastic shortening of the pile [mm].
          type: array
          items:
            type: number
      required:
        - pile_tip_level_nap
        - A
        - R_t_d_plug
        - R_t_d
        - R_t_k
        - R_s_mob_ratio
        - R_s_mob
        - k_v_b
        - k_v_1
        - q_s_max_mean
        - s_e
        - s_b
    uplift_single_output:
      allOf:
        - $ref: "#/components/schemas/shared_uplift_output"
        - type: object
          properties:
            layer_table:
              $ref: "#/components/schemas/layer_table_output"
            cpt_chart:
              $ref: "#/components/schemas/cpt_chart_uplift"
            results_table:
              $ref: "#/components/schemas/table_uplift_output"
            calculation_params:
              $ref: "#/components/schemas/share_uplift_output"
          required:
            - layer_table
            - cpt_chart
            - results_table
            - calculation_params
    shared_uplift_output:
      type: object
      properties:
        coordinates:
          $ref: "#/components/schemas/coordinates"
        pile_grid:
          required:
            - geometry
            - index_location
            - points
          type: object
          properties:
            geometry:
              $ref: "#/components/schemas/MultiPolygon"
            index_location:
              type: integer
            points:
              type: array
              minItems: 1
              uniqueItems: true
              items:
                type: array
                items:
                  type: number
                minItems: 2
                maxItems: 2
        test_id:
          type: string
          description: The identifier of the CPT.
          example: CPT101
        unique_id:
          type: string
          description: Unique identifier for the CPT (only if provided in request).
        groundwater_level_nap:
          type: number
          description: |
            The ground water level, with respect to NAP.

            **unit: `m NAP`**
        top_of_tension_zone_nap:
          type: number
          description: |
            The top of uplift zone, with respect to NAP.

            **unit: `m NAP`**
      required:
        - groundwater_level_nap
        - top_of_tension_zone_nap
        - test_id
        - pile_grid
    shared_uplift_properties:
      type: object
      required:
        - pile_tip_levels_nap
      properties:
        norms:
          $ref: "#/components/schemas/norms_schema"
        pile_tip_levels_nap:
          type: array
          minItems: 1
          items:
            type: number
          uniqueItems: true
          description: |
            Range of values for which the pile resistance is calculated.

            **unit: `m NAP`**
          example:
            - -5
            - -5.5
            - -6
        excavation_settings:
          oneOf:
            - $ref: "#/components/schemas/excavation_settings_constant_method"
            - $ref: "#/components/schemas/excavation_settings_begemann_method"
          description: >
            Settings for the calculation of the stress reduction due to the
            excavation applied to the effective and total stresses.</br>

            The stress reduction method can be either `constant` or `begemann`. 
            Note that each method has its required settings.</br>

            Defaults to the `constant` method.
          example:
            stress_reduction_method: constant
        pile_grid:
          description: |
            The structure of the pile grid effects the effective area of the
            pile.
          properties:
            locations:
              type: array
              items:
                $ref: "#/components/schemas/Point2D"
              uniqueItems: true
              minItems: 2
            pile_index:
              type: number
              default: 0
              minimum: 0
              format: integer
              description: |
                Pile location used by given an index of the list.
          required:
            - locations
            - pile_index
        pile_head_level_nap:
          $ref: "#/components/schemas/pile_head_level_nap_input"
        excavation_depth_nap:
          $ref: "#/components/schemas/excavation_depth_nap_input"
        top_of_tension_zone_nap:
          type: number
          description: |
            Upper boundary of the uplift zone.

            **unit: `m NAP`**
          example: 0
        void_ratio_max:
          type: number
          default: 0.8
          minimum: 0
          exclusiveMinimum: true
          description: >
            Maximum void ratio of the soil (the loosest packing). The influence
            of this parameter is limited and therefore it is typically
            sufficient to provide a global estimation. For normally consolidated
            sands in The Netherlands, an emax = 0.80 can be used in most cases.
        void_ratio_min:
          type: number
          default: 0.4
          minimum: 0
          exclusiveMinimum: true
          description: >
            Minimum void ratio of the soil (the densest packing). The influence
            of this parameter is limited and therefore it is typically
            sufficient to provide a global estimation. For normally consolidated
            sands in The Netherlands, an emin = 0.40 can be used in most cases.
        pile_load_sls_max:
          type: number
          default: 1
          minimum: 0
          exclusiveMinimum: true
          description: >
            Maximum uplift force on pile Ft;max;k. Note that only positive
            values (uplift force) are accepted.

            **unit: `kN`**
        pile_load_sls_min:
          type: number
          default: 1
          description: >
            Minimum uplift force (or maximum bearing force) on pile
            -Ft;min;k (uplift > 0). Positive values (uplift force), negative
            values (bearing force) and 0.0 are accepted. Note that the
            positive must be <= `pile_load_sls_max`. 

            **unit: `kN`**
        gamma_s_t:
          type: number
          default: 1.35
          description: >
            Pile resistance factor gamma_s;t  used to compute the design cone
            resistance values qc;z;d as prescribed in NEN 9997-1+C2_2017
            7.6.3.3(d).
        overrule_xi:
          $ref: "#/components/schemas/overrule_xi"
    nen_uplift_properties:
      allOf:
        - $ref: "#/components/schemas/shared_uplift_properties"
        - type: object
          properties:
            pile_properties:
              $ref: "#/components/schemas/nen_pile_properties_input"
            construction_sequence:
              type: string
              enum:
                - cpt-pile
                - pile-cpt
              default: cpt-pile
              description: >
                Flag that indicates if CPT are performed before or after pile
                installation according to 7.3.1 CUR 2001-4. Note: if `pile-cpt`,
                then the `f1` is 1.
            excavation_param_t:
              type: number
              enum:
                - 1
                - 0.5
              description: >
                Excavation parameter depending on pile installation method
                and/or phasing.

                  - 1.0 if installation is not low in vibration (niet-trillingsarm) and piles are installed after excavating.
                  - 0.5 if piles have been installed before excavation or installation is low-vibrating (trillingsarm).

                See for more info **NEN 9997-1+C2:2017 7.6.2.3.(10)(k)**
              default: 1
    cur_uplift_properties:
      allOf:
        - $ref: "#/components/schemas/shared_uplift_properties"
        - type: object
          properties:
            pile_properties:
              $ref: "#/components/schemas/cur_pile_properties_input"
            excavation_param_t:
              type: number
              enum:
                - 1
                - 0.7
                - 0.5
              description: >
                Excavation parameter depending on pile installation method
                and/or phasing.

                  - 1.0 if installation is not low in vibration (niet-trillingsarm) and piles are installed after excavating.
                  - 0.7 if installation is not entirely low in vibration (niet geheel-trillingsarm) and piles are installed 
                  after excavating. This only applies to certain anchor piles. 
                  - 0.5 if piles have been installed before excavation or installation is low-vibrating (trillingsarm).

                See for more info **CROW-CUR Rapport 236:2023 6.1.1**
              default: 1
            investigation_test_qc_average:
              type: number
              description: >
                Average qc measured (qc;z;gem) over the length of the grout body
                of the anchor in which an investigation (load) test is performed
                (See CROW-CUR Rapport 236:2023 10.9 and NEN-EN-ISO 22477-5:2018
                8.2). Only applicable when an investigation test is performed on
                a grouted anchor.


                **unit:  `MPa`**
            investigation_test_tau_max:
              type: number
              description: >
                Maximum mobilized shear stress (τ_mob;max) over the surface of
                the grout body of the anchor determined from an investigation
                (load) test (See CROW-CUR Rapport 236:2023 10.9 and NEN-EN-ISO
                22477-5:2018 8.2). Only applicable when an investigation test is
                performed on a grouted anchor.

                 **unit: `kPa`**
            allow_resistance_at_low_stress:
              type: boolean
              default: false
              description: >
                Whether or not to allow computing resistance on uplift at
                levels with SLS effective stress < 50 kPa.


                Note that in no case resistance will not be computed 1.0 or 4.0
                m below surface level or excavation level based on the pile type
                **CROW-CUR Rapport 236:2023 6.1.1**.

                  - False: No resistance is computed at levels with SLS effective stress < 50 kPa. 
                  - True: Resistance is computed at levels with SLS effective stress < 50 kPa. 
                  Note that *CROW-CUR Rapport 236:2023 6.1.1* accepts this approach if it can 
                  be shown that sand layers located at higher levels are able to sustain the shaft friction.
    soil_properties_uplift_input:
      allOf:
        - $ref: "#/components/schemas/soil_properties"
        - type: object
          properties:
            groundwater_level_nap:
              type: number
              description: |
                The ground water level, with respect to NAP.

                **unit: `m NAP`**
            top_of_tension_zone_nap:
              type: number
              description: |
                Upper boundary of the uplift zone.

                **unit: `m NAP`**
              example: 0
            unique_id:
              type: string
              description: Optional unique identifier for the CPT. Will be returned.
    uplift_multiple_cpt_output:
      type: object
      properties:
        cpts:
          minItems: 1
          type: array
          items:
            $ref: "#/components/schemas/uplift_single_output"
        pile_properties:
          $ref: "#/components/schemas/pile_properties_output"
        group_results:
          description: |
            Results for the group of cpts as a whole.
          type: object
          required:
            - pile_tip_level_nap
            - var_coef
            - n_cpts
            - xi_value
            - xi_normative
            - cpt_normative
            - R_t_d_min
            - R_t_d_mean
            - R_t_d
            - R_t_d_plug
          properties:
            pile_tip_level_nap:
              description: The pile-tip level [m] w.r.t. NAP.
              type: array
              uniqueItems: true
              items:
                type: number
            R_t_d:
              description: The design value of the total bearingcapacity [kN].
              type: array
              items:
                type: number
            R_t_d_plug:
              description: The design value of the total plug weight bearingcapacity [kN].
              type: array
              items:
                type: number
            R_t_d_min:
              description: >
                The minimum of the single-CPT values for the calculated
                bearingcapacity [kN].
              type: array
              items:
                type: number
            R_t_d_mean:
              description: >
                The mean of the single-CPT values for the calculated
                bearingcapacity [kN].
              type: array
              items:
                type: number
            var_coef:
              description: >
                The variation coefficient [%] of the calculated bearing
                capacities  in the group.
              type: array
              items:
                type: number
            n_cpts:
              description: >
                The number of CPTs [-] that have been taken into account to 
                establish the Xi value.
              type: array
              items:
                type: number
            xi_normative:
              description: The normative Xi (either Xi_3 or Xi_4)
              type: array
              items:
                type: string
            xi_value:
              description: >
                The Xi value [-] that was applied to calculate the
                characteristic value of the total bearing capacity.
              type: array
              items:
                type: number
            cpt_normative:
              description: >
                The normative CPT. Can be "group average" if that was found to
                be  the normative scenario.
              type: array
              items:
                type: string
        calculation_params:
          type: object
          properties:
            gamma_s_t:
              type: number
              description: >
                Safety factor γ_s_t. Used to determine the tensile resistance of
                a pile.
              example: 1.2
            gamma_m_var_qc:
              description: >
                partial factor for the influence of load switching; NEN
                9997-1+C2:2017 7.6.3.3 (d)
              type: number
            excavation_settings:
              oneOf:
                - $ref: "#/components/schemas/excavation_settings_constant_method"
                - $ref: "#/components/schemas/excavation_settings_begemann_method"
              description: >
                Settings for the calculation of the stress reduction due to the
                excavation applied to the effective and total stresses.</br>

                The stress reduction method can be either `constant` or
                `begemann`.  Note that each method has its required
                settings.</br>

                Defaults to the `constant` method.
              example:
                stress_reduction_method: constant
          required:
            - gamma_s_t
            - gamma_m_var_qc
            - excavation_settings
      required:
        - cpts
        - group_results
        - pile_properties
        - calculation_params
    pile_head_level_nap_input:
      oneOf:
        - type: string
          enum:
            - surface
        - type: number
      default: surface
      example: surface
      description: |
        The level of the pile head. Can be:
          - a number: This is interpreted as a depth relative to NAP [m].
          - the string literal "surface": In this case the pile head level is set to
            the ground surface level of the individual CPTs or the excavation level if
            an excavation is performed.
    excavation_depth_nap_input:
      type: number
      description: |
        Soil excavation depth after the CPT was performed.

        **unit: `m NAP`**
      example: 0
    settlement_curve:
      type: integer
      description: >
        Settlement lines for figures 7.n and 7.o of NEN-9997-1

        As defined in table 7.c of NEN-9997-1.

        The value is inferred from the `standard_pile` specification by default, but
        can be overwritten.

        **unit: `-`**
    negative_fr_delta_factor:
      type: number
      description: >
        factor * φ = δ. This parameter will be multiplied with phi to get
        the delta parameter used in negative friction calculation according
        to NEN-9997-1 7.3.2.2 (e). Typically values are 1.0 for piles cast
        in place, and 0.75 for other pile types. The value is inferred from
        the `standard_pile` specification by default, but can be overwritten.

        **unit: `-`**
    adhesion:
      type: number
      description: >
        Optional adhesion value, use it if the pile shaft has undergone a
        special treatment. Examples:
            - adhesion = 50 kN/m2 for synthetic coating
            - adhesion = 20 kN/m2 for bentonite
            - adhesion = 10 kN/m2 for bitumen coating
        See 7.3.2.2(d) of NEN 9997-1 for examples.

        **unit: kPa**
    is_auger:
      type: boolean
      description: >
        Determines whether the pile the pile is an auger pile or not. This only
        influences the calculation (qc3-reduction) when norms.NEN99971_version=2025.

        The value is inferred from the `standard_pile` specification by default, but
        can be overwritten.
    installation_method:
      type: string
      enum:
        - "driven"
        - "screwed"
        - "excavated"
        - "vibrated"
        - "pressed"
        - "jetted"
      description: >
        Installation method of the pile. The following installation methods are
        interpreted as non-vibrating methods: "excavated", "pressed", "jetted",
        "screwed".

        The value is inferred from the `standard_pile` specification by default, but
        can be overwritten.
    is_low_vibrating:
      type: boolean
      description: >
        Determines whether the pile is installed with a low-vibrating method.
        Low-vibrating methods are "excavated", "pressed", "jetted", "screwed".

        The value is inferred from the `installation_method` specification by
        default, but can be overwritten.
    is_prefab:
      type: boolean
      description: >
        Determines whether the pile is a prefab pile or not.

        The value is inferred from the `standard_pile` specification by default, but
        can be overwritten.
    is_open_ended:
      type: boolean
      description: >
        Determines whether the pile is open-ended or not.

        The value is inferred from the `standard_pile` specification by default, but
        can be overwritten.
    alpha_s_clay:
      oneOf:
        - title: Depends on soil-type
          type: object
          properties:
            use_constant_value:
              type: boolean
              description: >
                If true, the constant value provided in `constant_value` is
                used for all soft layers in the positive friction calculation.
                If false, the values from table 7.d of NEN 9997-1 are used.
              enum: [false]
          required:
            - use_constant_value
        - title: Constant value
          type: object
          properties:
            use_constant_value:
              type: boolean
              description: >
                If true, the constant value provided in `constant_value` is
                used for all soft layers in the positive friction calculation.
                If false, the values from table 7.d of NEN 9997-1 are used.
              enum: [true]
            constant_value:
              type: number
              description: >
                Constant alpha s factor for soft layers used in the positive
                friction calculation.

                **unit: `-`**
              example: 0.5
          required:
            - use_constant_value
            - constant_value
      default: { "use_constant_value": false }
    alpha_t_clay:
      oneOf:
        - title: Depends on soil-type
          type: object
          properties:
            use_constant_value:
              type: boolean
              description: >
                If true, the constant value provided in `constant_value` is
                used for all soft layers in the friction calculation.
                If false, the values from table 7.d of NEN 9997-1 are used.
              enum: [false]
          required:
            - use_constant_value
        - title: Constant value
          type: object
          properties:
            use_constant_value:
              type: boolean
              description: >
                If true, the constant value provided in `constant_value` is
                used for all soft layers in the friction calculation.
                If false, the values from table 7.d of NEN 9997-1 are used.
              enum: [true]
            constant_value:
              type: number
              description: >
                Constant alpha t factor for soft layers used in the
                friction calculation.

                **unit: `-`**
              example: 0.5
          required:
            - use_constant_value
            - constant_value
      default: { "use_constant_value": false }
    alpha_s_sand:
      type: number
      description: >
        Alpha s factor for coarse layers used in the positive friction
        calculation. The value is inferred from the standard_pile
        specification by default, but can be overwritten.

        **unit: `-`**
    alpha_p:
      type: number
      description: >
        Alpha p factor used in pile tip resistance calculation.

        The value is inferred from the `standard_pile` specification by default, but
        can be overwritten.

        **unit: `-`**
    alpha_t_sand:
      type: number
      description: >
        Alpha t factor for shaft friction, used in uplift calculations.

        The value is inferred from the `standard_pile` specification by default, but
        can be overwritten.

        **unit: `-`**
    qc_z_a_lesser_1m:
      type: number
      minimum: 0
      default: 12
      description: >
        Maximum cone resistance `qc` value allowed for layers with 
        thickness < 1m in the calculation of positive skin friction
        resistance. This value is used to compute the trimmed (chamfered) 
        `qc;z;a` values according to NEN 9997-1+C2:2017 7.6.2.3.(10)(i). </br></br>

        This value must be less or equal than `qc_z_a_greater_1m`. </br></br>

        **unit: `MPa`**
    qc_z_a_greater_1m:
      type: number
      minimum: 0
      default: 15
      description: >
        Maximum cone resistance `qc` value allowed for layers with 
        thickness >= 1m in the calculation of positive skin friction
        resistance. This value is used to compute the trimmed (chamfered) 
        `qc;z;a` values according to NEN 9997-1+C2:2017 7.6.2.3.(10)(i). </br></br>

        This value must be greater or equal than `qc_z_a_lesser_1m`. </br></br>

        **unit: `MPa`**
    qb_max_limit:
      type: number
      minimum: 0
      default: 15
      description: >
        Maximum value allowed for the pile tip resistance `qb_max`
        obtained according to NEN 9997-1+C2:2017 7.6.2.3.(10)(e). </br></br>

        Note that is value will be used as a limit for `qb_max` unless
        `use_almere_rules` is `true` and a higher value than 12 MPa is 
        specified. </br></br>

        **unit: `MPa`**
    chamfered:
      type: number
      description: >
        chamfered value of the qc measurements related to the pile type [MPa]
tags:
  - name: Service
  - name: Pile properties
  - name: Friction ranges
  - name: Report
  - name: Uplift
  - name: Bearing
  - name: Grouper
  - name: Result
